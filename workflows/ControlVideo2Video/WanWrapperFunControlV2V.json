{"id":"0a670f05-d463-4a00-92e1-615bc164f1ed","revision":0,"last_node_id":213,"last_link_id":342,"nodes":[{"id":23,"type":"WanVideoTeaCache","pos":[1092.0614013671875,1884.4798583984375],"size":[315,178],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"rel_l1_thresh","name":"rel_l1_thresh","type":"FLOAT","widget":{"name":"rel_l1_thresh"},"link":null},{"localized_name":"start_step","name":"start_step","type":"INT","widget":{"name":"start_step"},"link":null},{"localized_name":"end_step","name":"end_step","type":"INT","widget":{"name":"end_step"},"link":null},{"localized_name":"cache_device","name":"cache_device","type":"COMBO","widget":{"name":"cache_device"},"link":null},{"localized_name":"use_coefficients","name":"use_coefficients","type":"BOOLEAN","widget":{"name":"use_coefficients"},"link":null},{"localized_name":"mode","name":"mode","shape":7,"type":"COMBO","widget":{"name":"mode"},"link":null}],"outputs":[{"localized_name":"teacache_args","name":"teacache_args","type":"TEACACHEARGS","slot_index":0,"links":[113]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"a4b1a4be7ac69ba705cd9cc43450751cd2e6f25c","Node name for S&R":"WanVideoTeaCache"},"widgets_values":[0.10000000000000002,1,-1,"offload_device",true,"e"]},{"id":72,"type":"WanVideoExperimentalArgs","pos":[1080.3291015625,2257.1103515625],"size":[327.5999755859375,226],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"video_attention_split_steps","name":"video_attention_split_steps","type":"STRING","widget":{"name":"video_attention_split_steps"},"link":null},{"localized_name":"cfg_zero_star","name":"cfg_zero_star","type":"BOOLEAN","widget":{"name":"cfg_zero_star"},"link":null},{"localized_name":"use_zero_init","name":"use_zero_init","type":"BOOLEAN","widget":{"name":"use_zero_init"},"link":null},{"localized_name":"zero_star_steps","name":"zero_star_steps","type":"INT","widget":{"name":"zero_star_steps"},"link":null},{"localized_name":"use_fresca","name":"use_fresca","type":"BOOLEAN","widget":{"name":"use_fresca"},"link":null},{"localized_name":"fresca_scale_low","name":"fresca_scale_low","type":"FLOAT","widget":{"name":"fresca_scale_low"},"link":null},{"localized_name":"fresca_scale_high","name":"fresca_scale_high","type":"FLOAT","widget":{"name":"fresca_scale_high"},"link":null},{"localized_name":"fresca_freq_cutoff","name":"fresca_freq_cutoff","type":"INT","widget":{"name":"fresca_freq_cutoff"},"link":null}],"outputs":[{"localized_name":"exp_args","name":"exp_args","type":"EXPERIMENTALARGS","links":[128]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"f08293bf033aee29772eb23843e3b601e4bfbe2a","Node name for S&R":"WanVideoExperimentalArgs"},"widgets_values":["",false,true,0,false,1,1.25,20]},{"id":10,"type":"VHS_VideoCombine","pos":[2451.8896484375,954.4317016601562],"size":[218.82891845703125,334],"flags":{},"order":120,"mode":0,"inputs":[{"label":"图像","localized_name":"images","name":"images","type":"IMAGE","link":134},{"label":"音频","localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"label":"批次管理","localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"label":"文件名","localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"124c913ccdd8a585734ea758c35fa1bab8499c99","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"%date:yyyy-MM-dd%","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"2025-03-26_00025.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"2025-03-26_00025.png","fullpath":"/home/art-official/ArtOfficial/Applications/ComfyUI/output/2025-03-26_00025.mp4"},"muted":false}}},{"id":93,"type":"GetNode","pos":[-6040.87109375,666.2453002929688],"size":[210,60],"flags":{"collapsed":true},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[161]}],"title":"Get_height","properties":{},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":94,"type":"GetNode","pos":[-6040.87109375,618.5497436523438],"size":[210,58],"flags":{"collapsed":true},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[162]}],"title":"Get_width","properties":{},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":96,"type":"SetNode","pos":[-5892.2021484375,266.43426513671875],"size":[210,60],"flags":{},"order":74,"mode":0,"inputs":[{"name":"STRING","type":"STRING","link":165}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_pos_prompt","properties":{"previousName":"pos_prompt"},"widgets_values":["pos_prompt"]},{"id":98,"type":"CannyEdgePreprocessor","pos":[-1769.195556640625,901.1669921875],"size":[315,106],"flags":{},"order":58,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":182},{"localized_name":"low_threshold","name":"low_threshold","shape":7,"type":"INT","widget":{"name":"low_threshold"},"link":null},{"localized_name":"high_threshold","name":"high_threshold","shape":7,"type":"INT","widget":{"name":"high_threshold"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"CannyEdgePreprocessor"},"widgets_values":[100,200,512]},{"id":36,"type":"DepthAnythingV2Preprocessor","pos":[-1779.44677734375,589.5888061523438],"size":[352.79998779296875,82],"flags":{},"order":56,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":180},{"localized_name":"ckpt_name","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DepthAnythingV2Preprocessor"},"widgets_values":["depth_anything_v2_vitl.pth",512]},{"id":100,"type":"AIO_Preprocessor","pos":[-1787.538330078125,1351.2535400390625],"size":[315,82],"flags":{},"order":60,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":184},{"localized_name":"preprocessor","name":"preprocessor","shape":7,"type":"COMBO","widget":{"name":"preprocessor"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"AIO_Preprocessor"},"widgets_values":["none",512]},{"id":89,"type":"SetNode","pos":[-538.63330078125,696.5714111328125],"size":[210,60],"flags":{},"order":99,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":171}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_control_video","properties":{"previousName":"control_video"},"widgets_values":["control_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":104,"type":"GetNode","pos":[-2094.979736328125,956.78271484375],"size":[210,60],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[180,181,182,183,184]}],"title":"Get_orig_video","properties":{},"widgets_values":["orig_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":102,"type":"GetNode","pos":[-1279.6502685546875,848.989990234375],"size":[210,58],"flags":{"collapsed":false},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[185]}],"title":"Get_width","properties":{},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":101,"type":"GetNode","pos":[-1278.488037109375,961.22265625],"size":[210,60],"flags":{"collapsed":false},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[186]}],"title":"Get_height","properties":{},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":105,"type":"SetNode","pos":[-5902.09375,974.8764038085938],"size":[210,60],"flags":{},"order":77,"mode":0,"inputs":[{"name":"INT","type":"INT","link":187}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_frame_count","properties":{"previousName":"frame_count"},"widgets_values":["frame_count"],"color":"#1b4669","bgcolor":"#29699c"},{"id":85,"type":"GetNode","pos":[1566.9285888671875,826.4783935546875],"size":[210,60],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[148]}],"title":"Get_wan_vae","properties":{},"widgets_values":["wan_vae"]},{"id":122,"type":"PathchSageAttentionKJ","pos":[-4787.46142578125,884.5613403320312],"size":[315,58],"flags":{},"order":90,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":204},{"localized_name":"sage_attention","name":"sage_attention","type":"COMBO","widget":{"name":"sage_attention"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[189]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"PathchSageAttentionKJ"},"widgets_values":["sageattn_qk_int8_pv_fp16_cuda"]},{"id":134,"type":"ControlNetLoader","pos":[-5259.08544921875,1343.528076171875],"size":[315,58],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[219]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ControlNetLoader"},"widgets_values":["instantX-Flux-Union.safetensors"]},{"id":145,"type":"Note","pos":[-4864.36181640625,988.8411865234375],"size":[351.20001220703125,106.19999694824219],"flags":{},"order":9,"mode":4,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You can use any pre-processor you'd like, I'm using Depth here. DWPose, Canny, Lineart, all work as expected."],"color":"#432","bgcolor":"#653"},{"id":107,"type":"ModelSamplingFlux","pos":[-3570.357421875,498.642578125],"size":[315,170],"flags":{},"order":106,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":189},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":229},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":230}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[235]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.2,0.5,1024,1024]},{"id":133,"type":"SaveImage","pos":[-2553.604248046875,777.4216918945312],"size":[315,270],"flags":{},"order":115,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":216},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":147,"type":"GetNode","pos":[-5219.04931640625,985.589599609375],"size":[210,60],"flags":{},"order":10,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[241]}],"title":"Get_orig_video","properties":{},"widgets_values":["orig_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":61,"type":"ImageResizeKJ","pos":[-955.7706298828125,685.7064208984375],"size":[315,266],"flags":{},"order":86,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":328},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":185},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":186},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"BOOLEAN","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"crop","name":"crop","shape":7,"type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[171,243]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"ImageResizeKJ"},"widgets_values":[480,832,"lanczos",false,2,0]},{"id":150,"type":"CLIPTextEncode","pos":[-4395.9267578125,946.8104248046875],"size":[371.5728454589844,88],"flags":{},"order":64,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":247},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[246]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":92,"type":"ImageResizeKJ","pos":[-5899.3603515625,496.753173828125],"size":[315,266],"flags":{},"order":72,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":159},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":162},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":161},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"BOOLEAN","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"crop","name":"crop","shape":7,"type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[160]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"ImageResizeKJ"},"widgets_values":[512,512,"lanczos",false,2,0]},{"id":91,"type":"SetNode","pos":[-5562.65576171875,505.330078125],"size":[210,60],"flags":{},"order":92,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":160}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_first_frame","properties":{"previousName":"first_frame"},"widgets_values":["first_frame"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":124,"type":"UNETLoader","pos":[-5236.18505859375,443.3624572753906],"size":[315,82],"flags":{},"order":11,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[249]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"UNETLoader"},"widgets_values":["flux/flux1-dev.sft","fp8_e4m3fn"]},{"id":103,"type":"SetNode","pos":[-5635.044921875,1124.8675537109375],"size":[210,60],"flags":{},"order":97,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":179}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_orig_video","properties":{"previousName":"orig_video"},"widgets_values":["orig_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":121,"type":"TorchCompileModelFluxAdvanced","pos":[-4837.43115234375,571.4472045898438],"size":[400,262],"flags":{},"order":63,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":249},{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"double_blocks","name":"double_blocks","type":"STRING","widget":{"name":"double_blocks"},"link":null},{"localized_name":"single_blocks","name":"single_blocks","type":"STRING","widget":{"name":"single_blocks"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","shape":7,"type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[204]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"TorchCompileModelFluxAdvanced"},"widgets_values":["inductor",false,"default","0-18","0-37",false,64]},{"id":123,"type":"EmptyLatentImage","pos":[-3556.531982421875,1146.1065673828125],"size":[315,126],"flags":{"collapsed":false},"order":107,"mode":4,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":238},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":239},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[244]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"EmptyLatentImage"},"widgets_values":[904,1280,1]},{"id":118,"type":"VAELoader","pos":[-4374.9384765625,1076.328125],"size":[315,58],"flags":{},"order":12,"mode":4,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[213,248]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAELoader"},"widgets_values":["flux/flux_vae.sft"]},{"id":141,"type":"ImageResizeKJ","pos":[-4393.59716796875,1245.834716796875],"size":[315,266],"flags":{},"order":101,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":280},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":227},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":226},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"BOOLEAN","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"crop","name":"crop","shape":7,"type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[228]},{"localized_name":"width","name":"width","type":"INT","links":[229,238]},{"localized_name":"height","name":"height","type":"INT","links":[230,239]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"ImageResizeKJ"},"widgets_values":[512,512,"lanczos",false,2,0]},{"id":114,"type":"DualCLIPLoader","pos":[-5236.77294921875,565.3046875],"size":[315,130],"flags":{},"order":13,"mode":4,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[201,247]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.sft","t5xxl_fp8_e4m3fn.sft","flux","default"]},{"id":154,"type":"AddLabel","pos":[3042.8623046875,801.3037109375],"size":[315,274],"flags":{},"order":65,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":261},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[253]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Orig Video","up"]},{"id":155,"type":"AddLabel","pos":[3042.95751953125,1149.6724853515625],"size":[315,274],"flags":{},"order":66,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":260},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[254]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Controlnet Image","up"]},{"id":156,"type":"AddLabel","pos":[3038.05224609375,1519.1998291015625],"size":[315,274],"flags":{},"order":67,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":259},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[255]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Control Video","up"]},{"id":157,"type":"AddLabel","pos":[3041.322265625,1867.4730224609375],"size":[315,274],"flags":{},"order":68,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":258},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[256]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Output","up"]},{"id":1,"type":"WanVideoDecode","pos":[2015.05029296875,934.4205932617188],"size":[315,174],"flags":{},"order":118,"mode":0,"inputs":[{"label":"vae","localized_name":"vae","name":"vae","type":"WANVAE","link":148},{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","link":1},{"localized_name":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"},"link":null},{"localized_name":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"},"link":null},{"localized_name":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"},"link":null},{"localized_name":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"},"link":null},{"localized_name":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"},"link":null}],"outputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","slot_index":0,"links":[134,257]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoDecode"},"widgets_values":[true,272,272,144,128]},{"id":163,"type":"SetNode","pos":[2207.13232421875,1218.35400390625],"size":[210,60],"flags":{},"order":122,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":257}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_output_vid","properties":{"previousName":"output_vid"},"widgets_values":["output_vid"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":159,"type":"GetNode","pos":[2775.450439453125,809.2453002929688],"size":[210,60],"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[261]}],"title":"Get_orig_video","properties":{},"widgets_values":["orig_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":160,"type":"GetNode","pos":[2793.531494140625,1162.518310546875],"size":[210,58],"flags":{},"order":15,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[260]}],"title":"Get_controlnet_image","properties":{},"widgets_values":["controlnet_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":161,"type":"GetNode","pos":[2788.720947265625,1530.5062255859375],"size":[210,58],"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[259]}],"title":"Get_control_video","properties":{},"widgets_values":["control_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":162,"type":"GetNode","pos":[2777.3701171875,1888.683837890625],"size":[210,58],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[258]}],"title":"Get_output_vid","properties":{},"widgets_values":["output_vid"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":87,"type":"GetNode","pos":[31.191877365112305,2009.109130859375],"size":[210,58],"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[149]}],"title":"Get_wan_vae","properties":{},"widgets_values":["wan_vae"]},{"id":167,"type":"Note","pos":[-1537.4495849609375,200.95834350585938],"size":[835.0125732421875,242.07286071777344],"flags":{},"order":19,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["I am using Depth and Lineart for this example, but you can use any combination of the ones provided. You can also bypass the image blend node and connect one of the preprocessor nodes straight to \"Resize Image\" if you don't want to use Image Blend."],"color":"#432","bgcolor":"#653"},{"id":120,"type":"CLIPTextEncode","pos":[-4405.07373046875,701.9639282226562],"size":[400,200],"flags":{},"order":71,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":201},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":262}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[222]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":12,"type":"WanVideoTorchCompileSettings","pos":[464.5567932128906,584.3507690429688],"size":[421.6000061035156,202],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null},{"localized_name":"compile_transformer_blocks_only","name":"compile_transformer_blocks_only","type":"BOOLEAN","widget":{"name":"compile_transformer_blocks_only"},"link":null},{"localized_name":"dynamo_recompile_limit","name":"dynamo_recompile_limit","shape":7,"type":"INT","widget":{"name":"dynamo_recompile_limit"},"link":null}],"outputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","type":"WANCOMPILEARGS","links":[11]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoTorchCompileSettings"},"widgets_values":["inductor",false,"default",false,64,true,128]},{"id":83,"type":"GetNode","pos":[866.469970703125,1544.7633056640625],"size":[210,58],"flags":{"collapsed":true},"order":21,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[146]}],"title":"Get_height","properties":{},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":82,"type":"GetNode","pos":[863.4981079101562,1483.2266845703125],"size":[210,60],"flags":{"collapsed":true},"order":22,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[145]}],"title":"Get_width","properties":{},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":2,"type":"WanVideoSampler","pos":[1522.2449951171875,943.2230834960938],"size":[315,1023.3333129882812],"flags":{},"order":119,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"WANVIDEOMODEL","link":3},{"label":"text_embeds","localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","link":340},{"label":"image_embeds","localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":93},{"localized_name":"samples","name":"samples","shape":7,"type":"LATENT","link":null},{"localized_name":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS","link":null},{"localized_name":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"localized_name":"teacache_args","name":"teacache_args","shape":7,"type":"TEACACHEARGS","link":113},{"localized_name":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"localized_name":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS","link":74},{"localized_name":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"localized_name":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":128},{"localized_name":"sigmas","name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"localized_name":"unianimate_poses","name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"riflex_freq_index","name":"riflex_freq_index","type":"INT","widget":{"name":"riflex_freq_index"},"link":null},{"localized_name":"denoise_strength","name":"denoise_strength","shape":7,"type":"FLOAT","widget":{"name":"denoise_strength"},"link":null},{"localized_name":"batched_cfg","name":"batched_cfg","shape":7,"type":"BOOLEAN","widget":{"name":"batched_cfg"},"link":null},{"localized_name":"rope_function","name":"rope_function","shape":7,"type":"COMBO","widget":{"name":"rope_function"},"link":null}],"outputs":[{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","slot_index":0,"links":[1]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoSampler"},"widgets_values":[30,6,5,599174162918387,"fixed",true,"unipc",0,1,false,"comfy"]},{"id":34,"type":"ImageResizeKJ","pos":[-5746.869140625,1257.512451171875],"size":[315,286],"flags":{},"order":76,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":245},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":270},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":269},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"BOOLEAN","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"crop","name":"crop","shape":7,"type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[179]},{"localized_name":"width","name":"width","type":"INT","links":[]},{"localized_name":"height","name":"height","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"68db110554d5f1d9bef8d027a111a49fd7f85e1b","Node name for S&R":"ImageResizeKJ"},"widgets_values":[480,12513,"lanczos",false,2,0]},{"id":81,"type":"INTConstant","pos":[-6308,1682.2928466796875],"size":[210,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[139,270]}],"title":"Width","properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"INTConstant"},"widgets_values":[480],"color":"#1b4669","bgcolor":"#29699c"},{"id":80,"type":"INTConstant","pos":[-6303.041015625,1792.0721435546875],"size":[210,58],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[138,177,268,269]}],"title":"Height","properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"INTConstant"},"widgets_values":[832],"color":"#1b4669","bgcolor":"#29699c"},{"id":77,"type":"SetNode","pos":[-5938.12744140625,1658.195068359375],"size":[210,58],"flags":{},"order":69,"mode":0,"inputs":[{"name":"INT","type":"INT","link":139}],"outputs":[{"name":"*","type":"*","links":[]}],"title":"Set_width","properties":{"previousName":"width"},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":78,"type":"SetNode","pos":[-5957.8974609375,1772.79541015625],"size":[210,58],"flags":{},"order":70,"mode":0,"inputs":[{"name":"INT","type":"INT","link":138}],"outputs":[{"name":"INT","type":"INT","links":[135]}],"title":"Set_height","properties":{"previousName":"height"},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":158,"type":"ImageConcatMulti","pos":[3493.2509765625,1461.64306640625],"size":[315,190],"flags":{},"order":91,"mode":0,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":253},{"localized_name":"image_2","name":"image_2","type":"IMAGE","link":254},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null},{"localized_name":"match_image_size","name":"match_image_size","type":"BOOLEAN","widget":{"name":"match_image_size"},"link":null},{"name":"image_3","type":"IMAGE","link":255},{"name":"image_4","type":"IMAGE","link":256}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[273]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028"},"widgets_values":[4,"right",true,null]},{"id":175,"type":"GetNode","pos":[3531.870361328125,1886.8250732421875],"size":[210,60],"flags":{},"order":27,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[274]}],"title":"Get_pos_prompt","properties":{},"widgets_values":["pos_prompt"]},{"id":44,"type":"WanVideoSLG","pos":[1097.3746337890625,2086.221435546875],"size":[315,106],"flags":{},"order":28,"mode":4,"inputs":[{"localized_name":"blocks","name":"blocks","type":"STRING","widget":{"name":"blocks"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"slg_args","name":"slg_args","type":"SLGARGS","links":[74]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5fbe79872a1f6fbe48751dd30a16124df7dd71a","Node name for S&R":"WanVideoSLG"},"widgets_values":["9,10",0.20000000000000004,0.8000000000000002]},{"id":170,"type":"GetNode","pos":[-5125.47900390625,824.957763671875],"size":[210,60],"flags":{},"order":29,"mode":4,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[262]}],"title":"Get_pos_prompt","properties":{},"widgets_values":["pos_prompt"]},{"id":138,"type":"ControlNetApplyAdvanced","pos":[-3930.595458984375,757.75146484375],"size":[315,186],"flags":{},"order":105,"mode":4,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":222},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":246},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":220},{"localized_name":"image","name":"image","type":"IMAGE","link":228},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":248},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[250]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[237]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.5900000000000001,0,0.6000000000000001]},{"id":88,"type":"LoadImage","pos":[-6364.041015625,494.82958984375],"size":[315,314],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[159]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["womantalking.mp4","image"]},{"id":144,"type":"DepthAnythingV2Preprocessor","pos":[-4810.4765625,1145.2568359375],"size":[352.79998779296875,82],"flags":{},"order":87,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":242},{"localized_name":"ckpt_name","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DepthAnythingV2Preprocessor"},"widgets_values":["depth_anything_v2_vitl.pth",512]},{"id":148,"type":"VHS_SelectImages","pos":[-5130.59912109375,1153.8885498046875],"size":[212.06817626953125,106],"flags":{},"order":62,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":241},{"localized_name":"indexes","name":"indexes","type":"STRING","widget":{"name":"indexes"},"link":null},{"localized_name":"err_if_missing","name":"err_if_missing","type":"BOOLEAN","widget":{"name":"err_if_missing"},"link":null},{"localized_name":"err_if_empty","name":"err_if_empty","type":"BOOLEAN","widget":{"name":"err_if_empty"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[242,275,277]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_SelectImages"},"widgets_values":{"indexes":"0","err_if_missing":true,"err_if_empty":true}},{"id":142,"type":"GetNode","pos":[-4837.8720703125,1642.9796142578125],"size":[210,60],"flags":{},"order":31,"mode":4,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[227]}],"title":"Get_width","properties":{},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":143,"type":"GetNode","pos":[-4843.84228515625,1749.2896728515625],"size":[210,58],"flags":{},"order":32,"mode":4,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[226]}],"title":"Get_height","properties":{},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":146,"type":"KSampler","pos":[-3191.532958984375,590.9905395507812],"size":[315,787.3333129882812],"flags":{},"order":111,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":235},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":250},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":237},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":244},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[240]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"KSampler"},"widgets_values":[233307814842938,"fixed",20,1,"euler","normal",1]},{"id":137,"type":"SetUnionControlNetType","pos":[-5257.91552734375,1434.448974609375],"size":[315,58],"flags":{},"order":61,"mode":4,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":219},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[220]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SetUnionControlNetType"},"widgets_values":["openpose"]},{"id":177,"type":"DWPreprocessor","pos":[-4798.75537109375,1396.7646484375],"size":[320.79998779296875,222],"flags":{},"order":89,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":277},{"localized_name":"detect_hand","name":"detect_hand","shape":7,"type":"COMBO","widget":{"name":"detect_hand"},"link":null},{"localized_name":"detect_body","name":"detect_body","shape":7,"type":"COMBO","widget":{"name":"detect_body"},"link":null},{"localized_name":"detect_face","name":"detect_face","shape":7,"type":"COMBO","widget":{"name":"detect_face"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"},"link":null},{"localized_name":"pose_estimator","name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"},"link":null},{"localized_name":"scale_stick_for_xinsr_cn","name":"scale_stick_for_xinsr_cn","shape":7,"type":"COMBO","widget":{"name":"scale_stick_for_xinsr_cn"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"POSE_KEYPOINT","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":176,"type":"LineArtPreprocessor","pos":[-4802.19091796875,1276.1025390625],"size":[315,82],"flags":{},"order":88,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":275},{"localized_name":"coarse","name":"coarse","shape":7,"type":"COMBO","widget":{"name":"coarse"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[280]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":67,"type":"LineArtPreprocessor","pos":[-1757.1751708984375,744.338623046875],"size":[315,82],"flags":{},"order":57,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":181},{"localized_name":"coarse","name":"coarse","shape":7,"type":"COMBO","widget":{"name":"coarse"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[169]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":149,"type":"VHS_VideoCombine","pos":[-576.985595703125,880.2456665039062],"size":[218.82891845703125,668.5700073242188],"flags":{},"order":100,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":243},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h265-mp4","pix_fmt":"yuv420p10le","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00012.mp4","subfolder":"","type":"output","format":"video/h265-mp4","frame_rate":24,"workflow":"AnimateDiff_00012.png","fullpath":"/workspace/ComfyUI/output/AnimateDiff_00012.mp4"}}}},{"id":174,"type":"AddLabel","pos":[3769.871337890625,1753.1396484375],"size":[315,274],"flags":{},"order":102,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":273},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":274},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[284]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,60,20,"white","black","FreeMono.ttf","Text","down"]},{"id":180,"type":"Note","pos":[-4869.4306640625,2537.134033203125],"size":[351.20001220703125,106.19999694824219],"flags":{},"order":33,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You can use any pre-processor you'd like, I'm using Depth here. DWPose, Canny, Lineart, all work as expected."],"color":"#432","bgcolor":"#653"},{"id":182,"type":"GetNode","pos":[-5224.1181640625,2533.88232421875],"size":[210,58],"flags":{},"order":34,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[304]}],"title":"Get_orig_video","properties":{},"widgets_values":["orig_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":186,"type":"EmptyLatentImage","pos":[-3561.600341796875,2694.3994140625],"size":[315,126],"flags":{"collapsed":false},"order":110,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":292},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":291},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[315]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"EmptyLatentImage"},"widgets_values":[904,1280,1]},{"id":187,"type":"VAELoader","pos":[-4380.00732421875,2624.620849609375],"size":[315,58],"flags":{},"order":35,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAELoader"},"widgets_values":["flux/flux_vae.sft"]},{"id":188,"type":"ImageResizeKJ","pos":[-4398.666015625,2794.127685546875],"size":[315,266],"flags":{},"order":103,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":327},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":295},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":294},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"BOOLEAN","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"crop","name":"crop","shape":7,"type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[301]},{"localized_name":"width","name":"width","type":"INT","links":[292]},{"localized_name":"height","name":"height","type":"INT","links":[291]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"ImageResizeKJ"},"widgets_values":[512,512,"lanczos",false,2,0]},{"id":191,"type":"GetNode","pos":[-5130.5478515625,2373.25048828125],"size":[210,58],"flags":{},"order":36,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[297]}],"title":"Get_pos_prompt","properties":{},"widgets_values":["pos_prompt"]},{"id":192,"type":"ControlNetApplyAdvanced","pos":[-3935.663818359375,2306.044189453125],"size":[315,186],"flags":{},"order":109,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":298},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":299},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":318},{"localized_name":"image","name":"image","type":"IMAGE","link":301},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":320},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[313]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[314]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.5900000000000001,0,0.6000000000000001]},{"id":194,"type":"VHS_SelectImages","pos":[-5135.66796875,2702.181396484375],"size":[212.06817626953125,106],"flags":{},"order":73,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":304},{"localized_name":"indexes","name":"indexes","type":"STRING","widget":{"name":"indexes"},"link":null},{"localized_name":"err_if_missing","name":"err_if_missing","type":"BOOLEAN","widget":{"name":"err_if_missing"},"link":null},{"localized_name":"err_if_empty","name":"err_if_empty","type":"BOOLEAN","widget":{"name":"err_if_empty"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[303,306,307]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_SelectImages"},"widgets_values":{"indexes":"0","err_if_missing":true,"err_if_empty":true}},{"id":195,"type":"GetNode","pos":[-4842.94091796875,3191.27197265625],"size":[210,58],"flags":{},"order":37,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[295]}],"title":"Get_width","properties":{},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":196,"type":"GetNode","pos":[-4848.9111328125,3297.582275390625],"size":[210,58],"flags":{},"order":38,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[294]}],"title":"Get_height","properties":{},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":200,"type":"SaveImage","pos":[-2558.672607421875,2325.714599609375],"size":[315,270],"flags":{},"order":116,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":308},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":179,"type":"ControlNetLoader","pos":[-4762.3974609375,2397.216552734375],"size":[315,58],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[318]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ControlNetLoader"},"widgets_values":["sai_xl_depth_256lora.safetensors"]},{"id":190,"type":"CLIPTextEncode","pos":[-4431.59619140625,2100.088134765625],"size":[400,200],"flags":{},"order":78,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":319},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":297}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[298]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":193,"type":"DepthAnythingV2Preprocessor","pos":[-4815.54541015625,2693.549560546875],"size":[352.79998779296875,82],"flags":{},"order":93,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":303},{"localized_name":"ckpt_name","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DepthAnythingV2Preprocessor"},"widgets_values":["depth_anything_v2_vitl.pth",512]},{"id":183,"type":"CLIPTextEncode","pos":[-4390.82177734375,2381.703125],"size":[371.5728454589844,88],"flags":{},"order":79,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":323},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[299]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Poor quality, blurry, grainy"]},{"id":203,"type":"KSampler","pos":[-3196.601318359375,2139.283447265625],"size":[315,787.3333129882812],"flags":{},"order":112,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":316},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":313},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":314},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":315},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[309]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"KSampler"},"widgets_values":[233307814842938,"fixed",20,6,"euler","normal",1]},{"id":129,"type":"VAEDecode","pos":[-2788.84912109375,793.910888671875],"size":[210,46],"flags":{},"order":113,"mode":4,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":240},{"localized_name":"vae","name":"vae","type":"VAE","link":213}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[216]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":201,"type":"VAEDecode","pos":[-2793.91748046875,2342.20361328125],"size":[210,46],"flags":{},"order":114,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":309},{"localized_name":"vae","name":"vae","type":"VAE","link":321}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[308,325]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":198,"type":"DWPreprocessor","pos":[-4803.82421875,2945.05712890625],"size":[320.79998779296875,222],"flags":{},"order":94,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":306},{"localized_name":"detect_hand","name":"detect_hand","shape":7,"type":"COMBO","widget":{"name":"detect_hand"},"link":null},{"localized_name":"detect_body","name":"detect_body","shape":7,"type":"COMBO","widget":{"name":"detect_body"},"link":null},{"localized_name":"detect_face","name":"detect_face","shape":7,"type":"COMBO","widget":{"name":"detect_face"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"},"link":null},{"localized_name":"pose_estimator","name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"},"link":null},{"localized_name":"scale_stick_for_xinsr_cn","name":"scale_stick_for_xinsr_cn","shape":7,"type":"COMBO","widget":{"name":"scale_stick_for_xinsr_cn"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"POSE_KEYPOINT","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":199,"type":"LineArtPreprocessor","pos":[-4807.259765625,2824.395263671875],"size":[315,82],"flags":{},"order":95,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":307},{"localized_name":"coarse","name":"coarse","shape":7,"type":"COMBO","widget":{"name":"coarse"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[327]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":71,"type":"ImageBlend","pos":[-1345.827392578125,681.2454833984375],"size":[315,102],"flags":{},"order":85,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","link":null},{"localized_name":"image2","name":"image2","type":"IMAGE","link":281},{"localized_name":"blend_factor","name":"blend_factor","type":"FLOAT","widget":{"name":"blend_factor"},"link":null},{"localized_name":"blend_mode","name":"blend_mode","type":"COMBO","widget":{"name":"blend_mode"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ImageBlend"},"widgets_values":[0.5,"normal"]},{"id":99,"type":"DWPreprocessor","pos":[-1772.825927734375,1065.7269287109375],"size":[320.79998779296875,222],"flags":{},"order":59,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":183},{"localized_name":"detect_hand","name":"detect_hand","shape":7,"type":"COMBO","widget":{"name":"detect_hand"},"link":null},{"localized_name":"detect_body","name":"detect_body","shape":7,"type":"COMBO","widget":{"name":"detect_body"},"link":null},{"localized_name":"detect_face","name":"detect_face","shape":7,"type":"COMBO","widget":{"name":"detect_face"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"},"link":null},{"localized_name":"pose_estimator","name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"},"link":null},{"localized_name":"scale_stick_for_xinsr_cn","name":"scale_stick_for_xinsr_cn","shape":7,"type":"COMBO","widget":{"name":"scale_stick_for_xinsr_cn"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[281,328]},{"localized_name":"POSE_KEYPOINT","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":153,"type":"VHS_VideoCombine","pos":[4163.00634765625,1390.14013671875],"size":[218.82891845703125,334],"flags":{},"order":108,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":284},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"%date:yyyy-MM-dd%","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"2025-03-26_00026.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"2025-03-26_00026.png","fullpath":"/home/art-official/ArtOfficial/Applications/ComfyUI/output/2025-03-26_00026.mp4"}}}},{"id":151,"type":"SetNode","pos":[-2470.590087890625,2002.1324462890625],"size":[210,60],"flags":{},"order":117,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":325}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_controlnet_image","properties":{"previousName":"controlnet_image"},"widgets_values":["controlnet_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":168,"type":"Note","pos":[-4632.59375,179.65850830078125],"size":[842.1327514648438,154.57717895507812],"flags":{},"order":40,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The flux group takes a lot of VRAM, if you are strugging with that, you can use SD15 or SDXL instead\nFlux model: https://huggingface.co/black-forest-labs/FLUX.1-dev\nFlux Clips (Text Encoders): https://huggingface.co/comfyanonymous/flux_text_encoders/tree/main\nFor flux, make sure to download flux union controlnet.\nhttps://huggingface.co/Shakker-Labs/FLUX.1-dev-ControlNet-Union-Pro/tree/main\n\nIf you want to use the SDXL controlnet, just make sure to switch the \"controlnet image\" node\nSDXL Model: https://civitai.com/models/133005/juggernaut-xl\nSDXL Controlnets: https://huggingface.co/lllyasviel/sd_control_collection/tree/main\n\nPut the controlnets in the models > controlnet folder"],"color":"#432","bgcolor":"#653"},{"id":152,"type":"Fast Groups Bypasser (rgthree)","pos":[-5092.548828125,113.74429321289062],"size":[252,178],"flags":{},"order":41,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"}},{"id":33,"type":"StringConstantMultiline","pos":[-6403.93359375,210.01406860351562],"size":[400,200],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","widget":{"name":"string"},"link":null},{"localized_name":"strip_newlines","name":"strip_newlines","type":"BOOLEAN","widget":{"name":"strip_newlines"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","slot_index":0,"links":[165]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"68db110554d5f1d9bef8d027a111a49fd7f85e1b","Node name for S&R":"StringConstantMultiline"},"widgets_values":["A beautifuul woman with brunette hair is surrounded by psychadelic flowing colors and clouds",true]},{"id":205,"type":"Note","pos":[-7025.193359375,829.1304321289062],"size":[406.78839111328125,354.1882629394531],"flags":{},"order":43,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Just upload a video, make sure the video is resized appropriately, adjust your model paths appropriately in all model nodes, and go! Using SDXL, this takes about 10GB VRAM max without any quantizations.\n\nWith flux, it takes about 20GB, unforutnately due to the size of flux Union controlnet.\n\nIf you want to run 1-click generations, use SDXL, if you want a little better quality, use flux.\n\nOn my 5090, generations take about 2.5minutes"],"color":"#432","bgcolor":"#653"},{"id":166,"type":"Note","pos":[509.67071533203125,215.6741485595703],"size":[1100.806640625,227.55471801757812],"flags":{},"order":44,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["T5 Text Encoder, VAE, and Clip Encoder can be found here: https://huggingface.co/Kijai/WanVideo_comfy\nModels can be found here: https://huggingface.co/alibaba-pai/Wan2.1-Fun-1.3B-Control/tree/main\nor here (14B): https://huggingface.co/alibaba-pai/Wan2.1-Fun-14B-Control\nAll you need is the diffusion_pytorch_model.safetensors, everything else is from regular Wan\n\nIf you have bitsnbytes working and are running into VRAM issues (OOM), change all the \"quantization\" inputs to fp8\n\nYou can swap up to 40 blocks to save more VRAM\n\nIf you don't have triton installed, you will have to bypass \"WanVideo Torch Compile\"\n\nIf you don't have SageAttention installed, you will have to change \"attention_mode\" input to \"sdpa\"\n\nTeacache, SLG, and ZeroStar kind of work, but they will probably be optimized in the future, so PULL UPDATES REGULARLY!"],"color":"#432","bgcolor":"#653"},{"id":95,"type":"GetNode","pos":[66.2314224243164,1456.6785888671875],"size":[281.06793212890625,58],"flags":{},"order":45,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[271,329]}],"title":"Get_controlnet_image","properties":{},"widgets_values":["controlnet_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":90,"type":"GetNode","pos":[-163.2094268798828,2163.53076171875],"size":[210,60],"flags":{},"order":46,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[265]}],"title":"Get_control_video","properties":{},"widgets_values":["control_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":173,"type":"GetImageSizeAndCount","pos":[92.55860137939453,2161.45361328125],"size":[277.20001220703125,86],"flags":{},"order":75,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":265}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[266]},{"label":"480 width","localized_name":"width","name":"width","type":"INT","links":null},{"label":"832 height","localized_name":"height","name":"height","type":"INT","links":null},{"label":"81 count","localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":106,"type":"GetNode","pos":[849.0448608398438,1637.0469970703125],"size":[210,60],"flags":{"collapsed":true},"order":47,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[188]}],"title":"Get_frame_count","properties":{},"widgets_values":["frame_count"],"color":"#1b4669","bgcolor":"#29699c"},{"id":49,"type":"WanVideoImageToVideoEncode","pos":[1061.8038330078125,1332.4652099609375],"size":[352.79998779296875,418],"flags":{},"order":121,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":331},{"localized_name":"clip_embeds","name":"clip_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","link":330},{"localized_name":"start_image","name":"start_image","shape":7,"type":"IMAGE","link":329},{"localized_name":"end_image","name":"end_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"control_embeds","name":"control_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":332},{"localized_name":"temporal_mask","name":"temporal_mask","shape":7,"type":"MASK","link":null},{"localized_name":"extra_latents","name":"extra_latents","shape":7,"type":"LATENT","link":82},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":145},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":146},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":188},{"localized_name":"noise_aug_strength","name":"noise_aug_strength","type":"FLOAT","widget":{"name":"noise_aug_strength"},"link":null},{"localized_name":"start_latent_strength","name":"start_latent_strength","type":"FLOAT","widget":{"name":"start_latent_strength"},"link":null},{"localized_name":"end_latent_strength","name":"end_latent_strength","type":"FLOAT","widget":{"name":"end_latent_strength"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"fun_or_fl2v_model","name":"fun_or_fl2v_model","shape":7,"type":"BOOLEAN","widget":{"name":"fun_or_fl2v_model"},"link":null}],"outputs":[{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","slot_index":0,"links":[93]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b415fe78f152e3361b6e37e47074c1a0dc386a8e","Node name for S&R":"WanVideoImageToVideoEncode"},"widgets_values":[832,480,81,0,1,1,true,true]},{"id":17,"type":"WanVideoEncode","pos":[402.0599060058594,1935.5965576171875],"size":[315,242],"flags":{},"order":96,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":149},{"localized_name":"image","name":"image","type":"IMAGE","link":266},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"},"link":null},{"localized_name":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"},"link":null},{"localized_name":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"},"link":null},{"localized_name":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"},"link":null},{"localized_name":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"},"link":null},{"localized_name":"noise_aug_strength","name":"noise_aug_strength","shape":7,"type":"FLOAT","widget":{"name":"noise_aug_strength"},"link":null},{"localized_name":"latent_strength","name":"latent_strength","shape":7,"type":"FLOAT","widget":{"name":"latent_strength"},"link":null}],"outputs":[{"localized_name":"samples","name":"samples","type":"LATENT","links":[16]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"a4b1a4be7ac69ba705cd9cc43450751cd2e6f25c","Node name for S&R":"WanVideoEncode"},"widgets_values":[false,272,272,144,128,0,1]},{"id":16,"type":"WanVideoControlEmbeds","pos":[744.1532592773438,1880.4718017578125],"size":[315,102],"flags":{},"order":104,"mode":0,"inputs":[{"localized_name":"latents","name":"latents","type":"LATENT","link":16},{"localized_name":"fun_ref_image","name":"fun_ref_image","shape":7,"type":"LATENT","link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","slot_index":0,"links":[82,332]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"a4b1a4be7ac69ba705cd9cc43450751cd2e6f25c","Node name for S&R":"WanVideoControlEmbeds"},"widgets_values":[0,1]},{"id":47,"type":"VHS_LoadVideo","pos":[-6328.87353515625,889.7728881835938],"size":[251.52520751953125,736.0448608398438],"flags":{},"order":48,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[245]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":[187]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"3a96e87951f498ebcbb6d5bf685f6b0014c8f591","Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"WomanDancing2.mp4","force_rate":24,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"WomanDancing2.mp4","type":"input","format":"video/mp4","force_rate":24,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1}}}},{"id":204,"type":"CheckpointLoaderSimple","pos":[-5064.32470703125,2143.5576171875],"size":[315,98],"flags":{},"order":49,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[316]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[319,323]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[320,321]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd_xl_base_1.0.safetensors"]},{"id":11,"type":"WanVideoVAELoader","pos":[-186.8709716796875,591.8096313476562],"size":[315,82],"flags":{},"order":50,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","shape":7,"type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"label":"vae","localized_name":"vae","name":"vae","type":"WANVAE","slot_index":0,"links":[147]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoVAELoader"},"widgets_values":["Wan2_1_VAE_fp32.safetensors","bf16"]},{"id":84,"type":"SetNode","pos":[163.4171905517578,588.9506225585938],"size":[210,60],"flags":{},"order":80,"mode":0,"inputs":[{"name":"WANVAE","type":"WANVAE","link":147}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_wan_vae","properties":{"previousName":"wan_vae"},"widgets_values":["wan_vae"]},{"id":50,"type":"WanVideoClipVisionEncode","pos":[470.3894348144531,1452.8060302734375],"size":[327.5999755859375,262],"flags":{},"order":81,"mode":0,"inputs":[{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":335},{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":271},{"localized_name":"image_2","name":"image_2","shape":7,"type":"IMAGE","link":null},{"localized_name":"negative_image","name":"negative_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"strength_1","name":"strength_1","type":"FLOAT","widget":{"name":"strength_1"},"link":null},{"localized_name":"strength_2","name":"strength_2","type":"FLOAT","widget":{"name":"strength_2"},"link":null},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null},{"localized_name":"combine_embeds","name":"combine_embeds","type":"COMBO","widget":{"name":"combine_embeds"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"tiles","name":"tiles","shape":7,"type":"INT","widget":{"name":"tiles"},"link":null},{"localized_name":"ratio","name":"ratio","shape":7,"type":"FLOAT","widget":{"name":"ratio"},"link":null}],"outputs":[{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","links":[330]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b415fe78f152e3361b6e37e47074c1a0dc386a8e","Node name for S&R":"WanVideoClipVisionEncode"},"widgets_values":[1,1,"center","average",true,0,0.5]},{"id":86,"type":"GetNode","pos":[638.8648071289062,1297.281005859375],"size":[210,58],"flags":{},"order":51,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[331]}],"title":"Get_wan_vae","properties":{},"widgets_values":["wan_vae"]},{"id":209,"type":"LoadWanVideoClipTextEncoder","pos":[33.08283233642578,1280.9488525390625],"size":[327.5999755859375,106],"flags":{},"order":52,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"load_device","name":"load_device","shape":7,"type":"COMBO","widget":{"name":"load_device"},"link":null}],"outputs":[{"localized_name":"wan_clip_vision","name":"wan_clip_vision","type":"CLIP_VISION","links":[335]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"c4dce1cdbae549014a829363667d1ae126a210cf","Node name for S&R":"LoadWanVideoClipTextEncoder"},"widgets_values":["open-clip-xlm-roberta-large-vit-huge-14_visual_fp32.safetensors","fp16","offload_device"]},{"id":210,"type":"WanVideoTextEmbedBridge","pos":[1086.56787109375,1019.8086547851562],"size":[315,46],"flags":{},"order":98,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":336},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":339}],"outputs":[{"localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":[340]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"fc7ab666a2087b0ba41a0692f813b332665ffd43","Node name for S&R":"WanVideoTextEmbedBridge"}},{"id":211,"type":"CLIPTextEncode","pos":[748.33984375,1051.389892578125],"size":[400,200],"flags":{"collapsed":true},"order":83,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":337},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":342}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[336]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":213,"type":"CLIPLoader","pos":[139.78688049316406,965.3035888671875],"size":[315,106],"flags":{},"order":53,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[337,338]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPLoader"},"widgets_values":["native_umt5_xxl_fp8_e4m3fn_scaled.safetensors","wan","default"]},{"id":97,"type":"GetNode","pos":[241.54701232910156,1124.7113037109375],"size":[210,60],"flags":{},"order":54,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[342]}],"title":"Get_pos_prompt","properties":{},"widgets_values":["pos_prompt"]},{"id":212,"type":"CLIPTextEncode","pos":[749.35498046875,1103.660888671875],"size":[419.9649963378906,88],"flags":{"collapsed":true},"order":82,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":338},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[339]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":["色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走"]},{"id":15,"type":"WanVideoBlockSwap","pos":[531.5684204101562,825.1485595703125],"size":[315,154],"flags":{},"order":55,"mode":4,"inputs":[{"localized_name":"blocks_to_swap","name":"blocks_to_swap","type":"INT","widget":{"name":"blocks_to_swap"},"link":null},{"localized_name":"offload_img_emb","name":"offload_img_emb","type":"BOOLEAN","widget":{"name":"offload_img_emb"},"link":null},{"localized_name":"offload_txt_emb","name":"offload_txt_emb","type":"BOOLEAN","widget":{"name":"offload_txt_emb"},"link":null},{"localized_name":"use_non_blocking","name":"use_non_blocking","shape":7,"type":"BOOLEAN","widget":{"name":"use_non_blocking"},"link":null},{"localized_name":"vace_blocks_to_swap","name":"vace_blocks_to_swap","shape":7,"type":"INT","widget":{"name":"vace_blocks_to_swap"},"link":null}],"outputs":[{"localized_name":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","links":[14]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"bd31044ef574b7872386fa6228461b15465079ae","Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[20,true,true,true,0]},{"id":4,"type":"WanVideoModelLoader","pos":[986.168212890625,631.5381469726562],"size":[386.3900146484375,234],"flags":{},"order":84,"mode":0,"inputs":[{"label":"compile_args","localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":11},{"label":"block_swap_args","localized_name":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":14},{"localized_name":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":null},{"localized_name":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"localized_name":"vace_model","name":"vace_model","shape":7,"type":"VACEPATH","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"base_precision","name":"base_precision","type":"COMBO","widget":{"name":"base_precision"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"load_device","name":"load_device","type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"},"link":null}],"outputs":[{"label":"model","localized_name":"model","name":"model","type":"WANVIDEOMODEL","links":[3]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoModelLoader"},"widgets_values":["wan2.1_fun_control_1.3B_bf16.safetensors","fp16_fast","disabled","offload_device","sageattn"]},{"id":165,"type":"Note","pos":[-278.6109313964844,1617.274658203125],"size":[323.2325744628906,217.54666137695312],"flags":{},"order":26,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you're struggling with RAM, run the Controlnet first with groups 2, 3, and 4 bypassed. \n\nAfter you have your controlnet generated image,  bypass group 1, activate group 2, 3, and 4, upload your image here, connect this image node in place of \"Get_first_frame\" and run again."],"color":"#432","bgcolor":"#653"},{"id":164,"type":"LoadImage","pos":[60.27604293823242,1573.6005859375],"size":[315,314],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":null},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["1_2025-03-03_00001_.png","image"]}],"links":[[1,2,0,1,1,"LATENT"],[3,4,0,2,0,"WANVIDEOMODEL"],[11,12,0,4,0,"WANCOMPILEARGS"],[14,15,0,4,1,"BLOCKSWAPARGS"],[16,17,0,16,0,"LATENT"],[74,44,0,2,8,"SLGARGS"],[93,49,0,2,2,"WANVIDIMAGE_EMBEDS"],[113,23,0,2,6,"TEACACHEARGS"],[128,72,0,2,10,"EXPERIMENTALARGS"],[134,1,0,10,0,"IMAGE"],[138,80,0,78,0,"*"],[139,81,0,77,0,"*"],[145,82,0,49,7,"INT"],[146,83,0,49,8,"INT"],[147,11,0,84,0,"*"],[148,85,0,1,0,"WANVAE"],[149,87,0,17,0,"WANVAE"],[159,88,0,92,0,"IMAGE"],[160,92,0,91,0,"IMAGE"],[161,93,0,92,3,"INT"],[162,94,0,92,2,"INT"],[165,33,0,96,0,"*"],[171,61,0,89,0,"IMAGE"],[179,34,0,103,0,"IMAGE"],[180,104,0,36,0,"IMAGE"],[181,104,0,67,0,"IMAGE"],[182,104,0,98,0,"IMAGE"],[183,104,0,99,0,"IMAGE"],[184,104,0,100,0,"IMAGE"],[185,102,0,61,2,"INT"],[186,101,0,61,3,"INT"],[187,47,1,105,0,"*"],[188,106,0,49,9,"INT"],[189,122,0,107,0,"MODEL"],[201,114,0,120,0,"CLIP"],[204,121,0,122,0,"MODEL"],[213,118,0,129,1,"VAE"],[216,129,0,133,0,"IMAGE"],[219,134,0,137,0,"CONTROL_NET"],[220,137,0,138,2,"CONTROL_NET"],[222,120,0,138,0,"CONDITIONING"],[226,143,0,141,3,"INT"],[227,142,0,141,2,"INT"],[228,141,0,138,3,"IMAGE"],[229,141,1,107,3,"INT"],[230,141,2,107,4,"INT"],[235,107,0,146,0,"MODEL"],[237,138,1,146,2,"CONDITIONING"],[238,141,1,123,0,"INT"],[239,141,2,123,1,"INT"],[240,146,0,129,0,"LATENT"],[241,147,0,148,0,"IMAGE"],[242,148,0,144,0,"IMAGE"],[243,61,0,149,0,"IMAGE"],[244,123,0,146,3,"LATENT"],[245,47,0,34,0,"IMAGE"],[246,150,0,138,1,"CONDITIONING"],[247,114,0,150,0,"CLIP"],[248,118,0,138,4,"VAE"],[249,124,0,121,0,"MODEL"],[250,138,0,146,1,"CONDITIONING"],[253,154,0,158,0,"IMAGE"],[254,155,0,158,1,"IMAGE"],[255,156,0,158,5,"IMAGE"],[256,157,0,158,6,"IMAGE"],[257,1,0,163,0,"*"],[258,162,0,157,0,"IMAGE"],[259,161,0,156,0,"IMAGE"],[260,160,0,155,0,"IMAGE"],[261,159,0,154,0,"IMAGE"],[262,170,0,120,1,"STRING"],[265,90,0,173,0,"IMAGE"],[266,173,0,17,1,"IMAGE"],[269,80,0,34,3,"INT"],[270,81,0,34,2,"INT"],[271,95,0,50,1,"IMAGE"],[273,158,0,174,0,"IMAGE"],[274,175,0,174,9,"STRING"],[275,148,0,176,0,"IMAGE"],[277,148,0,177,0,"IMAGE"],[280,176,0,141,0,"IMAGE"],[281,99,0,71,1,"IMAGE"],[284,174,0,153,0,"IMAGE"],[291,188,2,186,1,"INT"],[292,188,1,186,0,"INT"],[294,196,0,188,3,"INT"],[295,195,0,188,2,"INT"],[297,191,0,190,1,"STRING"],[298,190,0,192,0,"CONDITIONING"],[299,183,0,192,1,"CONDITIONING"],[301,188,0,192,3,"IMAGE"],[303,194,0,193,0,"IMAGE"],[304,182,0,194,0,"IMAGE"],[306,194,0,198,0,"IMAGE"],[307,194,0,199,0,"IMAGE"],[308,201,0,200,0,"IMAGE"],[309,203,0,201,0,"LATENT"],[313,192,0,203,1,"CONDITIONING"],[314,192,1,203,2,"CONDITIONING"],[315,186,0,203,3,"LATENT"],[316,204,0,203,0,"MODEL"],[318,179,0,192,2,"CONTROL_NET"],[319,204,1,190,0,"CLIP"],[320,204,2,192,4,"VAE"],[321,204,2,201,1,"VAE"],[323,204,1,183,0,"CLIP"],[325,201,0,151,0,"IMAGE"],[327,199,0,188,0,"IMAGE"],[328,99,0,61,0,"IMAGE"],[329,95,0,49,2,"IMAGE"],[330,50,0,49,1,"WANVIDIMAGE_CLIPEMBEDS"],[331,86,0,49,0,"WANVAE"],[332,16,0,49,4,"WANVIDIMAGE_EMBEDS"],[335,209,0,50,0,"CLIP_VISION"],[336,211,0,210,0,"CONDITIONING"],[337,213,0,211,0,"CLIP"],[338,213,0,212,0,"CLIP"],[339,212,0,210,1,"CONDITIONING"],[340,210,0,2,1,"WANVIDEOTEXTEMBEDS"],[342,97,0,211,1,"STRING"]],"groups":[{"id":1,"title":"Inputs","bounding":[-6413.93359375,136.4141387939453,1110.9503173828125,1720.58740234375],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"2. Preprocessors for ControlVideo","bounding":[-2104.979736328125,515.9886474609375,1786.34423828125,927.2652587890625],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"3. Wan Inferencing","bounding":[-174.9094696044922,510.75079345703125,2855.6279296875,1886.3599853515625],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"1. Flux First Frame Controlnet","bounding":[-5281.484375,358.5989990234375,3125.586669921875,1508.7794189453125],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"4. Comparison","bounding":[2765.450439453125,727.7037353515625,1524.242431640625,1423.7681884765625],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"1. SDXL First Frame Controlnet","bounding":[-5286.55322265625,1906.8922119140625,3125.586669921875,1508.7794189453125],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.683013455365072,"offset":[2046.7064639846242,-884.1382670436367]},"frontendVersion":"1.17.11","reroutes":[{"id":1,"pos":[-4783.75830078125,1395.35888671875],"linkIds":[220]}],"ue_links":[],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"linkExtensions":[{"id":220,"parentId":1}]},"version":0.4}