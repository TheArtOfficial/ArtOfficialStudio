{"id":"5ffafd58-f1bb-4baa-a375-210d201fb60c","revision":0,"last_node_id":176,"last_link_id":350,"nodes":[{"id":6,"type":"WanVideoTextEncode","pos":[500.6814270019531,1725.7171630859375],"size":[400,200],"flags":{},"order":45,"mode":0,"inputs":[{"label":"t5","localized_name":"t5","name":"t5","type":"WANTEXTENCODER","link":7},{"localized_name":"model_to_offload","name":"model_to_offload","shape":7,"type":"WANVIDEOMODEL","link":null},{"name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"},"link":65}],"outputs":[{"label":"text_embeds","localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":[5]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoTextEncode"},"widgets_values":["A beautiful woman wearing a pink hat walking in a city","色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",true]},{"id":38,"type":"WanVideoSLG","pos":[1081.427978515625,2884.083984375],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"localized_name":"slg_args","name":"slg_args","type":"SLGARGS","links":[57]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"4cebb550326361286ed0a5430cc668241d65b832","Node name for S&R":"WanVideoSLG"},"widgets_values":["8",0.30000000000000004,0.7000000000000002]},{"id":51,"type":"WanVideoExperimentalArgs","pos":[1069.8055419921875,3028.627685546875],"size":[327.5999755859375,130],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"localized_name":"exp_args","name":"exp_args","type":"EXPERIMENTALARGS","links":[75]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"4cebb550326361286ed0a5430cc668241d65b832","Node name for S&R":"WanVideoExperimentalArgs"},"widgets_values":["",true,false,0]},{"id":37,"type":"WanVideoEnhanceAVideo","pos":[1073.381103515625,3203.743408203125],"size":[315,106],"flags":{},"order":2,"mode":4,"inputs":[],"outputs":[{"localized_name":"feta_args","name":"feta_args","type":"FETAARGS","links":[56]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"4cebb550326361286ed0a5430cc668241d65b832","Node name for S&R":"WanVideoEnhanceAVideo"},"widgets_values":[3.0000000000000004,0,1]},{"id":32,"type":"RemBGSession+","pos":[-1071.6552734375,3053.900634765625],"size":[315,82],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"localized_name":"REMBG_SESSION","name":"REMBG_SESSION","type":"REMBG_SESSION","links":[42]}],"properties":{"cnr_id":"comfyui_essentials","ver":"33ff89fd354d8ec3ab6affb605a79a931b445d99","Node name for S&R":"RemBGSession+"},"widgets_values":["u2net: general purpose","CUDA"]},{"id":36,"type":"PreviewImage","pos":[-635.167724609375,3343.04541015625],"size":[210,246],"flags":{},"order":62,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":55}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[""]},{"id":58,"type":"PreviewImage","pos":[-52.71739959716797,3370.416015625],"size":[210,246],"flags":{},"order":67,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":85}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[""]},{"id":66,"type":"Note","pos":[-1020.9337768554688,1256.514404296875],"size":[512,194],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["https://huggingface.co/Kijai/WanVideo_comfy/tree/main\nDownload the Wan2_1_VACE_1_3B_preview_bf16.safetensors file and put it into ComfyUI>models>diffusion_models, then select it in the \"WanVideo VACE Model Select\"\n\nThe rest of the models are the same as base Wan2.1. If you do not already have Wan2.1 Setup, GO TO THIS LINK AND WATCH THE VIDEO:\nhttps://youtu.be/D4VLXF4ZNq0?si=2c3ekxuDbKbc5m-K"],"color":"#432","bgcolor":"#653"},{"id":77,"type":"GetNode","pos":[2886.66162109375,1904.401123046875],"size":[210,60],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[132]}],"title":"Get_num_frames","properties":{},"widgets_values":["num_frames"],"color":"#1b4669","bgcolor":"#29699c"},{"id":75,"type":"PreviewImage","pos":[476.7022399902344,3435.197265625],"size":[210,246],"flags":{},"order":74,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":129}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[""]},{"id":20,"type":"ImageResizeKJ","pos":[370.7079162597656,3060.61865234375],"size":[315,326],"flags":{},"order":68,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":86},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"name":"width_input","shape":7,"type":"INT","widget":{"name":"width_input"},"link":null},{"name":"height_input","shape":7,"type":"INT","widget":{"name":"height_input"},"link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":18},{"name":"height","type":"INT","widget":{"name":"height"},"link":19}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[22,37,38,39,46,52,74,129]},{"localized_name":"width","name":"width","type":"INT","slot_index":1,"links":[44]},{"localized_name":"height","name":"height","type":"INT","slot_index":2,"links":[45]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"ImageResizeKJ"},"widgets_values":[832,480,"lanczos",false,2,0,0,"center"]},{"id":24,"type":"WanVideoTeaCache","pos":[1085.4776611328125,2667.0244140625],"size":[315,178],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"localized_name":"teacache_args","name":"teacache_args","type":"TEACACHEARGS","links":[27]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b415fe78f152e3361b6e37e47074c1a0dc386a8e","Node name for S&R":"WanVideoTeaCache"},"widgets_values":[0.10000000000000002,0,-1,"offload_device",true,"e"]},{"id":26,"type":"WanVideoVAELoader","pos":[42.654911041259766,1946.63232421875],"size":[315,82],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","links":[29,30,32,36]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b415fe78f152e3361b6e37e47074c1a0dc386a8e","Node name for S&R":"WanVideoVAELoader"},"widgets_values":["wan/wrapper_Wan2_1_VAE_fp32.safetensors","bf16"]},{"id":12,"type":"WanVideoTorchCompileSettings","pos":[12.118012428283691,954.9619750976562],"size":[390.5999755859375,202],"flags":{"collapsed":false},"order":8,"mode":0,"inputs":[],"outputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","type":"WANCOMPILEARGS","links":[11]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoTorchCompileSettings"},"widgets_values":["inductor",false,"default",false,64,true,128]},{"id":5,"type":"WanVideoBlockSwap","pos":[60.84629821777344,1226.555419921875],"size":[315,154],"flags":{"collapsed":false},"order":9,"mode":4,"inputs":[],"outputs":[{"label":"block_swap_args","localized_name":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","links":[4]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[0,true,true,true,0]},{"id":10,"type":"VHS_VideoCombine","pos":[1546.611572265625,2150.5693359375],"size":[219.3603515625,693.5579223632812],"flags":{},"order":86,"mode":0,"inputs":[{"label":"图像","localized_name":"images","name":"images","type":"IMAGE","link":9},{"label":"音频","localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"label":"批次管理","localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"label":"文件名","localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"124c913ccdd8a585734ea758c35fa1bab8499c99","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00692.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00692.png","fullpath":"/home/art-official/ArtOfficial/Applications/ComfyUI/output/AnimateDiff_00692.mp4"},"muted":false}}},{"id":65,"type":"WanVideoVACEModelSelect","pos":[-962.8857421875,1499.3604736328125],"size":[400,200],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"localized_name":"vace_model","name":"vace_model","type":"VACEPATH","links":[98]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"78559ef1f4462e57fec77dd6a0c2315da08f6f1f","Node name for S&R":"WanVideoVACEModelSelect"},"widgets_values":["wan/Wan2_1_VACE_1_3B_preview_bf16.safetensors","0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28"]},{"id":35,"type":"LayerUtility: ImageRemoveAlpha","pos":[-718.4738159179688,3108.227783203125],"size":[378,102],"flags":{},"order":55,"mode":0,"inputs":[{"localized_name":"RGBA_image","name":"RGBA_image","type":"IMAGE","link":53},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null}],"outputs":[{"localized_name":"RGB_image","name":"RGB_image","type":"IMAGE","links":[55,84]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"7b326d13e43fc4022cd80e472c7af67027409b1e","Node name for S&R":"LayerUtility: ImageRemoveAlpha"},"widgets_values":[true,"#FFFFFF"],"color":"rgba(38, 73, 116, 0.7)"},{"id":31,"type":"ImageRemoveBackground+","pos":[-1109.5494384765625,3196.6982421875],"size":[327.5999755859375,46],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"rembg_session","name":"rembg_session","type":"REMBG_SESSION","link":42},{"localized_name":"image","name":"image","type":"IMAGE","link":41}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[53]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"33ff89fd354d8ec3ab6affb605a79a931b445d99","Node name for S&R":"ImageRemoveBackground+"},"widgets_values":[]},{"id":96,"type":"GetNode","pos":[-1426.0552978515625,3927.823974609375],"size":[210,58],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","slot_index":0,"links":[171]}],"title":"Get_init_video","properties":{},"widgets_values":["init_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":99,"type":"DownloadAndLoadSAM2Model","pos":[-718.1962280273438,3884.28662109375],"size":[315,130],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","links":[157]}],"properties":{"cnr_id":"segment-anything-2","ver":"059815ecc55b17ae9b47d15ed9b39b243d73b25f","Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2.1_hiera_large.safetensors","video","cuda","fp16"]},{"id":110,"type":"VHS_VideoCombine","pos":[896.5023193359375,3970.432373046875],"size":[218.82891845703125,692.6367797851562],"flags":{},"order":76,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":180},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":10,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00690.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00690.png","fullpath":"/home/art-official/ArtOfficial/Applications/ComfyUI/output/AnimateDiff_00690.mp4"}}}},{"id":109,"type":"MaskToImage","pos":[535.5479736328125,3970.302978515625],"size":[264.5999755859375,26],"flags":{},"order":71,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":179}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[180,186,188]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":56,"type":"VHS_VideoCombine","pos":[178.17855834960938,2226.299560546875],"size":[219.3603515625,693.5579223632812],"flags":{},"order":77,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":336},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00691.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00691.png","fullpath":"/home/art-official/ArtOfficial/Applications/ComfyUI/output/AnimateDiff_00691.mp4"}}}},{"id":64,"type":"AddLabel","pos":[2477.32373046875,1912.2066650390625],"size":[315,274],"flags":{},"order":59,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":330},{"name":"caption","shape":7,"type":"STRING","widget":{"name":"caption"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[94,266]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Original Video","up",""]},{"id":40,"type":"AddLabel","pos":[2474.559814453125,2230.717041015625],"size":[315,274],"flags":{},"order":73,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":74},{"name":"caption","shape":7,"type":"STRING","widget":{"name":"caption"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[72]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Reference Image","up",""]},{"id":39,"type":"AddLabel","pos":[2493.25,2863.452392578125],"size":[315,274],"flags":{},"order":88,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":344},{"name":"caption","shape":7,"type":"STRING","widget":{"name":"caption"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[60,61,93,237]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Generated Video","up",""]},{"id":29,"type":"WanVideoVACEEncode","pos":[602.489501953125,2233.35107421875],"size":[315,310],"flags":{},"order":78,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":36},{"localized_name":"input_frames","name":"input_frames","shape":7,"type":"IMAGE","link":337},{"localized_name":"ref_images","name":"ref_images","shape":7,"type":"IMAGE","link":52},{"localized_name":"input_masks","name":"input_masks","shape":7,"type":"MASK","link":323},{"name":"width","type":"INT","widget":{"name":"width"},"link":44},{"name":"height","type":"INT","widget":{"name":"height"},"link":45},{"name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":200},{"localized_name":"prev_vace_embeds","name":"prev_vace_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":null}],"outputs":[{"localized_name":"vace_embeds","name":"vace_embeds","type":"WANVIDIMAGE_EMBEDS","links":[35]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"4cebb550326361286ed0a5430cc668241d65b832","Node name for S&R":"WanVideoVACEEncode"},"widgets_values":[832,480,85,1.0000000000000002,0,1]},{"id":57,"type":"ImagePadKJ","pos":[-224.42849731445312,3064.632080078125],"size":[315,222],"flags":{},"order":63,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":84},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[85,86]},{"localized_name":"masks","name":"masks","type":"MASK","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"ImagePadKJ"},"widgets_values":[0,0,0,0,0,"color","128,128,128"]},{"id":121,"type":"ImageCompositeMasked","pos":[1979.3486328125,2061.07568359375],"size":[315,146],"flags":{},"order":87,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":329},{"localized_name":"source","name":"source","type":"IMAGE","link":258},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":342}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":118,"type":"AddLabel","pos":[2488.37939453125,2545.44580078125],"size":[315,274],"flags":{},"order":79,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":338},{"name":"caption","shape":7,"type":"STRING","widget":{"name":"caption"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[238]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Pose Video","up",""]},{"id":63,"type":"ImageConcatMulti","pos":[3230.896484375,2138.6611328125],"size":[315,190],"flags":{},"order":89,"mode":0,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":266},{"localized_name":"image_2","name":"image_2","type":"IMAGE","link":267},{"name":"image_3","type":"IMAGE","link":238},{"name":"image_4","type":"IMAGE","link":237}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[96]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"91bdcfdf6016c0a706bca800186591890d55e391"},"widgets_values":[4,"right",false,null]},{"id":97,"type":"Note","pos":[-549.5453491210938,4357.556640625],"size":[349.95489501953125,194.0137939453125],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["<- To learn how to use this click the tool tip!"],"color":"#432","bgcolor":"#653"},{"id":104,"type":"ImageResizeKJ","pos":[-1118.9862060546875,3848.412841796875],"size":[315,266],"flags":{},"order":50,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":171},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"name":"width_input","shape":7,"type":"INT","widget":{"name":"width_input"},"link":null},{"name":"height_input","shape":7,"type":"INT","widget":{"name":"height_input"},"link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":172},{"name":"height","type":"INT","widget":{"name":"height"},"link":173}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[174]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"402124d5c4154c29a9c44f73315044bc02702d71","Node name for S&R":"ImageResizeKJ"},"widgets_values":[512,512,"nearest-exact",false,2,0,0,"disabled"]},{"id":2,"type":"WanVideoSampler","pos":[1074.236572265625,1577.8094482421875],"size":[315,1023.3333129882812],"flags":{},"order":82,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"WANVIDEOMODEL","link":3},{"label":"text_embeds","localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","link":5},{"label":"image_embeds","localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":35},{"localized_name":"samples","name":"samples","shape":7,"type":"LATENT","link":null},{"localized_name":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS","link":56},{"localized_name":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"localized_name":"teacache_args","name":"teacache_args","shape":7,"type":"TEACACHEARGS","link":27},{"localized_name":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"localized_name":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS","link":57},{"localized_name":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"localized_name":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":75}],"outputs":[{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","slot_index":0,"links":[1]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoSampler"},"widgets_values":[30,3.0000000000000004,5.000000000000001,429148610626425,"fixed",true,"unipc",0,1,false,"comfy",""]},{"id":127,"type":"SamplerCustomAdvanced","pos":[-3054.9140625,1260.9163818359375],"size":[355.20001220703125,709.0133666992188],"flags":{},"order":81,"mode":4,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":273},{"localized_name":"guider","name":"guider","type":"GUIDER","link":274},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":275},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":276},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":277}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[293]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"SamplerCustomAdvanced"},"widgets_values":[]},{"id":128,"type":"InpaintModelConditioning","pos":[-3444.912109375,1600.9169921875],"size":[315,138],"flags":{},"order":54,"mode":4,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":278},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":279},{"localized_name":"vae","name":"vae","type":"VAE","link":315},{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":281},{"localized_name":"mask","name":"mask","type":"MASK","link":282}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":0,"links":[285]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","slot_index":2,"links":[277]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"InpaintModelConditioning"},"widgets_values":[true]},{"id":129,"type":"CLIPTextEncode","pos":[-4074.912841796875,1580.9169921875],"size":[400,200],"flags":{},"order":41,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":314}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[279]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":130,"type":"ImpactImageInfo","pos":[-4484.912109375,1580.9169921875],"size":[210,86],"flags":{},"order":37,"mode":4,"inputs":[{"localized_name":"value","name":"value","type":"IMAGE","link":284}],"outputs":[{"localized_name":"batch","name":"batch","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","slot_index":1,"links":[288]},{"localized_name":"width","name":"width","type":"INT","slot_index":2,"links":[287]},{"localized_name":"channel","name":"channel","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"c6056b132d7e155c3ece42b77e08ea45bde1bfef","Node name for S&R":"ImpactImageInfo"},"widgets_values":[]},{"id":131,"type":"KSamplerSelect","pos":[-3444.912109375,1340.9163818359375],"size":[315,58],"flags":{},"order":14,"mode":4,"inputs":[],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","slot_index":0,"links":[275]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"KSamplerSelect"},"widgets_values":["ipndm"]},{"id":132,"type":"FluxGuidance","pos":[-3444.912109375,1240.9163818359375],"size":[317.4000244140625,58],"flags":{},"order":61,"mode":4,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":285}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[290]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"FluxGuidance"},"widgets_values":[30]},{"id":133,"type":"ModelSamplingFlux","pos":[-3604.9130859375,1010.916259765625],"size":[315,170],"flags":{},"order":69,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":286},{"name":"width","type":"INT","widget":{"name":"width"},"link":287},{"name":"height","type":"INT","widget":{"name":"height"},"link":288}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[289]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.2,0.5,1024,1024]},{"id":134,"type":"BasicGuider","pos":[-3264.913330078125,1140.9163818359375],"size":[241.79998779296875,46],"flags":{},"order":75,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":289},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":290}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[274]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"BasicGuider"},"widgets_values":[]},{"id":135,"type":"RandomNoise","pos":[-3599.29248046875,890.1770629882812],"size":[315,82],"flags":{},"order":15,"mode":4,"inputs":[],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","slot_index":0,"links":[273]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"RandomNoise"},"widgets_values":[1024982536914031,"randomize"]},{"id":136,"type":"MaskPreview+","pos":[-3369.412841796875,1833.5023193359375],"size":[210,246],"flags":{},"order":53,"mode":4,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":291}],"outputs":[],"properties":{"cnr_id":"comfyui_essentials","ver":"33ff89fd354d8ec3ab6affb605a79a931b445d99","Node name for S&R":"MaskPreview+"},"widgets_values":[]},{"id":137,"type":"InvertMask","pos":[-4191.45361328125,2344.245849609375],"size":[210,26],"flags":{},"order":52,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":292}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"InvertMask"},"widgets_values":[]},{"id":141,"type":"VAEDecode","pos":[-2464.91064453125,1290.9163818359375],"size":[210,46],"flags":{},"order":83,"mode":4,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":293},{"localized_name":"vae","name":"vae","type":"VAE","link":316}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[297]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":146,"type":"DownloadAndLoadFlorence2Model","pos":[-5196.60205078125,2204.690185546875],"size":[365.4000244140625,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[302]}],"properties":{"cnr_id":"comfyui-florence2","ver":"90b012e922f8bb0482bcd2ae24cdc191ec12a11f","Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large","fp16","sdpa"]},{"id":148,"type":"Note","pos":[-4234.45361328125,2424.245849609375],"size":[386.99981689453125,109.9999771118164],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you want to change aanything except what is masked, you can use the mask inverted here. Connect it to the \"mask\" of Grow Mask with Blur"],"color":"#432","bgcolor":"#653"},{"id":149,"type":"TorchCompileModelFluxAdvanced","pos":[-4972.171875,1091.6148681640625],"size":[400,262],"flags":{},"order":47,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":305}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[298]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"TorchCompileModelFluxAdvanced"},"widgets_values":["inductor",false,"default","0-18","0-37",false,64]},{"id":150,"type":"PathchSageAttentionKJ","pos":[-4931.88916015625,1407.014404296875],"size":[315,58],"flags":{},"order":57,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":298}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[272]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"9a15e22f5e9416c0968ce3de33923f8f601257dd","Node name for S&R":"PathchSageAttentionKJ"},"widgets_values":["sageattn_qk_int8_pv_fp16_cuda"]},{"id":151,"type":"Note","pos":[-5053.4150390625,2374.40625],"size":[265.3999938964844,197.4999542236328],"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Use this for automasking, use mask from load image if masking manually. Just update where it says \"person\" with the thing you want to mask."],"color":"#432","bgcolor":"#653"},{"id":154,"type":"Florence2Run","pos":[-4689.4052734375,2227.3701171875],"size":[400,364],"flags":{},"order":38,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":301},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":302}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","slot_index":1,"links":[292]},{"localized_name":"caption","name":"caption","type":"STRING","links":null},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"90b012e922f8bb0482bcd2ae24cdc191ec12a11f","Node name for S&R":"Florence2Run"},"widgets_values":["","referring_expression_segmentation",true,false,1024,3,true,"",280004392754699,"fixed"]},{"id":81,"type":"INTConstant","pos":[-1468.9481201171875,3075.2109375],"size":[210,58],"flags":{},"order":19,"mode":0,"inputs":[],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"402124d5c4154c29a9c44f73315044bc02702d71","Node name for S&R":"INTConstant"},"widgets_values":[81],"color":"#1b4669","bgcolor":"#29699c"},{"id":147,"type":"PreviewImage","pos":[-2219.646484375,1335.27294921875],"size":[561.275390625,614.7760009765625],"flags":{},"order":85,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":297}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":155,"type":"LoadImage","pos":[-5463.416015625,1497.1007080078125],"size":[315,314],"flags":{},"order":20,"mode":4,"inputs":[],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[281,284,301]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":[300]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-mask-3057985.6000000015.png [input]","image",""]},{"id":152,"type":"BasicScheduler","pos":[-3454.912109375,1450.9163818359375],"size":[315,106],"flags":{},"order":70,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":299}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","slot_index":0,"links":[276]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"BasicScheduler"},"widgets_values":["beta",30,1]},{"id":73,"type":"GetNode","pos":[440.77880859375,2616.070068359375],"size":[210,60],"flags":{"collapsed":false},"order":21,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[200]}],"title":"Get_num_frames","properties":{},"widgets_values":["num_frames"],"color":"#1b4669","bgcolor":"#29699c"},{"id":165,"type":"VAELoader","pos":[-3949.799072265625,1923.7091064453125],"size":[315,58],"flags":{},"order":22,"mode":4,"inputs":[],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[315,316]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"VAELoader"},"widgets_values":["flux/flux_vae.sft"]},{"id":170,"type":"Fast Groups Bypasser (rgthree)","pos":[205.41696166992188,3332.25537109375],"size":[252,274],"flags":{},"order":23,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"}},{"id":126,"type":"DifferentialDiffusion","pos":[-3934.91357421875,1240.9163818359375],"size":[277.20001220703125,26],"flags":{},"order":65,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":272}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[286,299]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"DifferentialDiffusion"},"widgets_values":[]},{"id":164,"type":"DualCLIPLoader","pos":[-5470.52099609375,1129.37060546875],"size":[315,122],"flags":{},"order":24,"mode":4,"inputs":[],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[313,314]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.sft","flux","default"]},{"id":4,"type":"WanVideoModelLoader","pos":[488.7870788574219,1250.755859375],"size":[401.1031188964844,234],"flags":{},"order":36,"mode":0,"inputs":[{"label":"compile_args","localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":11},{"label":"block_swap_args","localized_name":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":4},{"localized_name":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":null},{"localized_name":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"localized_name":"vace_model","name":"vace_model","shape":7,"type":"VACEPATH","link":98}],"outputs":[{"label":"model","localized_name":"model","name":"model","type":"WANVIDEOMODEL","links":[3]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoModelLoader"},"widgets_values":["wan/Wan2_1-T2V-1_3B_bf16.safetensors","fp16","fp8_e4m3fn","offload_device","sageattn"]},{"id":8,"type":"LoadWanVideoT5TextEncoder","pos":[-12.960779190063477,1743.2479248046875],"size":[352.79998779296875,130],"flags":{},"order":25,"mode":0,"inputs":[],"outputs":[{"label":"wan_t5_model","localized_name":"wan_t5_model","name":"wan_t5_model","type":"WANTEXTENCODER","links":[7]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"LoadWanVideoT5TextEncoder"},"widgets_values":["wan/wrapper_umt5-xxl-enc-bf16.safetensors","bf16","offload_device","fp8_e4m3fn"]},{"id":157,"type":"SetNode","pos":[-7192.99609375,1016.167724609375],"size":[210,58],"flags":{},"order":43,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":306}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_init_video","properties":{"previousName":"init_video"},"widgets_values":["init_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":159,"type":"SetNode","pos":[-7200.67919921875,1193.7237548828125],"size":[210,58],"flags":{},"order":44,"mode":0,"inputs":[{"name":"INT","type":"INT","link":304}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_num_frames","properties":{"previousName":"num_frames"},"widgets_values":["num_frames"],"color":"#1b4669","bgcolor":"#29699c"},{"id":145,"type":"SaveImage","pos":[-6064.67626953125,993.5078735351562],"size":[315,270],"flags":{},"order":64,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":340}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":23,"type":"LoadImage","pos":[-1515.2271728515625,3172.917236328125],"size":[315,314],"flags":{},"order":26,"mode":0,"inputs":[],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[41]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"First Frame","properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_kyudd_00005_.png","image",""],"color":"#323","bgcolor":"#535"},{"id":160,"type":"VHS_LoadVideo","pos":[-7633.4453125,935.9961547851562],"size":[251.52520751953125,725.0436401367188],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[306]},{"localized_name":"frame_count","name":"frame_count","type":"INT","slot_index":1,"links":[304]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"3a96e87951f498ebcbb6d5bf685f6b0014c8f591","Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"2025y-03-24_00007.mp4","force_rate":16,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":10,"select_every_nth":1,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"2025y-03-24_00007.mp4","type":"input","format":"video/mp4","force_rate":16,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":10,"select_every_nth":1}}}},{"id":50,"type":"RepeatImageBatch","pos":[2827.825927734375,2164.154296875],"size":[315,58],"flags":{},"order":80,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":72},{"name":"amount","type":"INT","widget":{"name":"amount"},"link":132}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[73,267]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"RepeatImageBatch"},"widgets_values":[81]},{"id":44,"type":"StringConstantMultiline","pos":[-1536.6416015625,2715.409423828125],"size":[400,200],"flags":{},"order":28,"mode":0,"inputs":[],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[65,66]}],"title":"Prompt","properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"StringConstantMultiline"},"widgets_values":["",true],"color":"#323","bgcolor":"#535"},{"id":173,"type":"ImageCompositeMasked","pos":[-504.1802978515625,2260.68359375],"size":[315,146],"flags":{},"order":72,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":333},{"localized_name":"source","name":"source","type":"IMAGE","link":350},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":335}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[336,337,338]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":143,"type":"GetNode","pos":[-6770.82763671875,981.9383544921875],"size":[210,58],"flags":{},"order":29,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","slot_index":0,"links":[295]}],"title":"Get_init_video","properties":{},"widgets_values":["init_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":144,"type":"VHS_SelectImages","pos":[-6517.58984375,992.6884765625],"size":[212.06817626953125,106],"flags":{},"order":46,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":295}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[339]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"3a96e87951f498ebcbb6d5bf685f6b0014c8f591","Node name for S&R":"VHS_SelectImages"},"widgets_values":{"indexes":"0","err_if_missing":true,"err_if_empty":true}},{"id":174,"type":"ImageResizeKJ","pos":[-6400.234375,1216.0418701171875],"size":[315,266],"flags":{},"order":56,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":339},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"name":"width_input","shape":7,"type":"INT","widget":{"name":"width_input"},"link":null},{"name":"height_input","shape":7,"type":"INT","widget":{"name":"height_input"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[340]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"402124d5c4154c29a9c44f73315044bc02702d71","Node name for S&R":"ImageResizeKJ"},"widgets_values":[480,832,"nearest-exact",false,2,0,0,"disabled"]},{"id":156,"type":"CLIPTextEncode","pos":[-4044.91357421875,1330.9163818359375],"size":[400,200],"flags":{},"order":40,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":313}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[278]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"CLIPTextEncode"},"widgets_values":["A man with a mustache"]},{"id":153,"type":"GrowMaskWithBlur","pos":[-4326.658203125,1834.5059814453125],"size":[315,246],"flags":{},"order":39,"mode":4,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":300}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","slot_index":0,"links":[282,291]},{"localized_name":"mask_inverted","name":"mask_inverted","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[40,0,true,false,15,1,1,false]},{"id":162,"type":"UNETLoader","pos":[-5516.123046875,914.3092041015625],"size":[315,82],"flags":{},"order":30,"mode":4,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[305]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"UNETLoader"},"widgets_values":["flux/flux1-fill-dev.sft","default"]},{"id":161,"type":"Fast Groups Bypasser (rgthree)","pos":[-7656.3359375,406.94268798828125],"size":[252,274],"flags":{},"order":31,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"}},{"id":123,"type":"PointsEditor","pos":[-1457.1522216796875,4358.4150390625],"size":[525,1132],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"bg_image","name":"bg_image","shape":7,"type":"IMAGE","link":null}],"outputs":[{"localized_name":"positive_coords","name":"positive_coords","type":"STRING","links":[262]},{"localized_name":"negative_coords","name":"negative_coords","type":"STRING","links":[263]},{"localized_name":"bbox","name":"bbox","type":"BBOX","links":null},{"localized_name":"bbox_mask","name":"bbox_mask","type":"MASK","links":null},{"localized_name":"cropped_image","name":"cropped_image","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"402124d5c4154c29a9c44f73315044bc02702d71","Node name for S&R":"PointsEditor","points":"PointsEditor","neg_points":"PointsEditor"},"widgets_values":["{\"positive\":[{\"x\":234.25599999999994,\"y\":472.90429999999986},{\"x\":191.79709999999994,\"y\":327.9583999999999}],\"negative\":[{\"x\":335.2788999999999,\"y\":308.92509999999993},{\"x\":108.34339999999997,\"y\":620.7783999999998},{\"x\":150.80229999999997,\"y\":225.47139999999996}]}","[{\"x\":234.25599999999994,\"y\":472.90429999999986},{\"x\":191.79709999999994,\"y\":327.9583999999999}]","[{\"x\":335.2788999999999,\"y\":308.92509999999993},{\"x\":108.34339999999997,\"y\":620.7783999999998},{\"x\":150.80229999999997,\"y\":225.47139999999996}]","[{\"startX\":181.47378359641624,\"startY\":261.74103403329264}]","[{\"startX\":181.47378359641624,\"startY\":261.74103403329264}]","xyxy",480,832,false,null,"",null]},{"id":98,"type":"Sam2Segmentation","pos":[-365.130859375,3995.21240234375],"size":[315,230],"flags":{},"order":60,"mode":0,"inputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","link":157},{"localized_name":"image","name":"image","type":"IMAGE","link":174},{"localized_name":"bboxes","name":"bboxes","shape":7,"type":"BBOX","link":null},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"name":"coordinates_positive","shape":7,"type":"STRING","widget":{"name":"coordinates_positive"},"link":262},{"name":"coordinates_negative","shape":7,"type":"STRING","widget":{"name":"coordinates_negative"},"link":263}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","slot_index":0,"links":[271]}],"properties":{"cnr_id":"segment-anything-2","ver":"059815ecc55b17ae9b47d15ed9b39b243d73b25f","Node name for S&R":"Sam2Segmentation"},"widgets_values":[true,"","",false]},{"id":105,"type":"GrowMaskWithBlur","pos":[55.22169494628906,4000.6796875],"size":[315,246],"flags":{},"order":66,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":271}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[179,323,324,335,342]},{"localized_name":"mask_inverted","name":"mask_inverted","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"402124d5c4154c29a9c44f73315044bc02702d71","Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[15,0,true,false,0,1,1,false]},{"id":1,"type":"WanVideoDecode","pos":[1480.6668701171875,1929.3294677734375],"size":[315,174],"flags":{},"order":84,"mode":0,"inputs":[{"label":"vae","localized_name":"vae","name":"vae","type":"WANVAE","link":29},{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","link":1}],"outputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","slot_index":0,"links":[9,253,258,343,344]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoDecode"},"widgets_values":[true,272,272,144,128]},{"id":45,"type":"VHS_VideoCombine","pos":[4130.33740234375,2069.713623046875],"size":[219.3603515625,444.3575134277344],"flags":{},"order":91,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":345},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00693.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00693.png","fullpath":"/home/art-official/ArtOfficial/Applications/ComfyUI/output/AnimateDiff_00693.mp4"}}}},{"id":43,"type":"AddLabel","pos":[3670.6708984375,2140.293701171875],"size":[315,274],"flags":{},"order":90,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":96},{"name":"caption","shape":7,"type":"STRING","widget":{"name":"caption"},"link":null},{"name":"text","type":"STRING","widget":{"name":"text"},"link":66}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[345]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Text","down",""]},{"id":101,"type":"ImageResizeKJ","pos":[-985.53076171875,2374.59228515625],"size":[315,266],"flags":{},"order":49,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":319},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"name":"width_input","shape":7,"type":"INT","widget":{"name":"width_input"},"link":null},{"name":"height_input","shape":7,"type":"INT","widget":{"name":"height_input"},"link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":167},{"name":"height","type":"INT","widget":{"name":"height"},"link":null},{"name":"height","type":"INT","widget":{"name":"height"},"link":168}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[329,330,332,333]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"ImageResizeKJ"},"widgets_values":[832,480,"lanczos",false,2,0,0,"disabled"]},{"id":172,"type":"CR Color Panel","pos":[-946.1593627929688,2703.525634765625],"size":[315,150],"flags":{},"order":51,"mode":0,"inputs":[{"name":"panel_width","type":"INT","widget":{"name":"panel_width"},"link":321},{"name":"panel_height","type":"INT","widget":{"name":"panel_height"},"link":322}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[320,331]},{"localized_name":"show_help","name":"show_help","type":"STRING","links":null}],"properties":{"cnr_id":"comfyroll","ver":"d78b780ae43fcf8c6b7c6505e6ffb4584281ceca","Node name for S&R":"CR Color Panel"},"widgets_values":[512,512,"custom","#808080"]},{"id":163,"type":"GetNode","pos":[-1483.1298828125,2209.378662109375],"size":[210,60],"flags":{},"order":33,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[319,346]}],"title":"Get_init_video","properties":{},"widgets_values":["init_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":17,"type":"INTConstant","pos":[-1477.001953125,3529.909912109375],"size":[210,58],"flags":{},"order":34,"mode":0,"inputs":[],"outputs":[{"localized_name":"value","name":"value","type":"INT","slot_index":0,"links":[18,104,105,106,167,172,321,348]}],"title":"width","properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"INTConstant"},"widgets_values":[480],"color":"#323","bgcolor":"#535"},{"id":18,"type":"INTConstant","pos":[-1491.44287109375,3645.34619140625],"size":[210,58],"flags":{},"order":35,"mode":0,"inputs":[],"outputs":[{"localized_name":"value","name":"value","type":"INT","slot_index":0,"links":[19,168,173,322,349]}],"title":"height","properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"INTConstant"},"widgets_values":[832],"color":"#323","bgcolor":"#535"},{"id":175,"type":"MediaPipe-FaceMeshPreprocessor","pos":[-1011.7909545898438,2825.15283203125],"size":[315,106],"flags":{},"order":48,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":346}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[347]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"MediaPipe-FaceMeshPreprocessor"},"widgets_values":[1,0.5,512]},{"id":176,"type":"ImageResizeKJ","pos":[-495.4550476074219,2724.695556640625],"size":[315,266],"flags":{},"order":58,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":347},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"name":"width_input","shape":7,"type":"INT","widget":{"name":"width_input"},"link":null},{"name":"height_input","shape":7,"type":"INT","widget":{"name":"height_input"},"link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":348},{"name":"height","type":"INT","widget":{"name":"height"},"link":349}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[350]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"402124d5c4154c29a9c44f73315044bc02702d71","Node name for S&R":"ImageResizeKJ"},"widgets_values":[512,512,"nearest-exact",false,2,0,0,"disabled"]}],"links":[[1,2,0,1,1,"LATENT"],[3,4,0,2,0,"WANVIDEOMODEL"],[4,5,0,4,1,"BLOCKSWAPARGS"],[5,6,0,2,1,"WANVIDEOTEXTEMBEDS"],[7,8,0,6,0,"WANTEXTENCODER"],[9,1,0,10,0,"IMAGE"],[11,12,0,4,0,"WANCOMPILEARGS"],[18,17,0,20,4,"INT"],[19,18,0,20,5,"INT"],[27,24,0,2,6,"TEACACHEARGS"],[29,26,0,1,0,"WANVAE"],[35,29,0,2,2,"WANVIDIMAGE_EMBEDS"],[36,26,0,29,0,"WANVAE"],[41,23,0,31,1,"IMAGE"],[42,32,0,31,0,"REMBG_SESSION"],[44,20,1,29,4,"INT"],[45,20,2,29,5,"INT"],[52,20,0,29,2,"IMAGE"],[53,31,0,35,0,"IMAGE"],[55,35,0,36,0,"IMAGE"],[56,37,0,2,4,"FETAARGS"],[57,38,0,2,8,"SLGARGS"],[65,44,0,6,2,"STRING"],[66,44,0,43,2,"STRING"],[72,40,0,50,0,"IMAGE"],[74,20,0,40,0,"IMAGE"],[75,51,0,2,10,"EXPERIMENTALARGS"],[84,35,0,57,0,"IMAGE"],[85,57,0,58,0,"IMAGE"],[86,57,0,20,0,"IMAGE"],[96,63,0,43,0,"IMAGE"],[98,65,0,4,4,"VACEPATH"],[129,20,0,75,0,"IMAGE"],[132,77,0,50,1,"INT"],[157,99,0,98,0,"SAM2MODEL"],[167,17,0,101,4,"INT"],[168,18,0,101,6,"INT"],[171,96,0,104,0,"IMAGE"],[172,17,0,104,4,"INT"],[173,18,0,104,5,"INT"],[174,104,0,98,1,"IMAGE"],[179,105,0,109,0,"MASK"],[180,109,0,110,0,"IMAGE"],[200,73,0,29,6,"INT"],[237,39,0,63,3,"IMAGE"],[238,118,0,63,2,"IMAGE"],[258,1,0,121,1,"IMAGE"],[262,123,0,98,4,"STRING"],[263,123,1,98,5,"STRING"],[266,64,0,63,0,"IMAGE"],[267,50,0,63,1,"IMAGE"],[271,98,0,105,0,"MASK"],[272,150,0,126,0,"MODEL"],[273,135,0,127,0,"NOISE"],[274,134,0,127,1,"GUIDER"],[275,131,0,127,2,"SAMPLER"],[276,152,0,127,3,"SIGMAS"],[277,128,2,127,4,"LATENT"],[278,156,0,128,0,"CONDITIONING"],[279,129,0,128,1,"CONDITIONING"],[281,155,0,128,3,"IMAGE"],[282,153,0,128,4,"MASK"],[284,155,0,130,0,"IMAGE"],[285,128,0,132,0,"CONDITIONING"],[286,126,0,133,0,"MODEL"],[287,130,2,133,1,"INT"],[288,130,1,133,2,"INT"],[289,133,0,134,0,"MODEL"],[290,132,0,134,1,"CONDITIONING"],[291,153,0,136,0,"MASK"],[292,154,1,137,0,"MASK"],[293,127,0,141,0,"LATENT"],[295,143,0,144,0,"IMAGE"],[297,141,0,147,0,"IMAGE"],[298,149,0,150,0,"MODEL"],[299,126,0,152,0,"MODEL"],[300,155,1,153,0,"MASK"],[301,155,0,154,0,"IMAGE"],[302,146,0,154,1,"FL2MODEL"],[304,160,1,159,0,"*"],[305,162,0,149,0,"MODEL"],[306,160,0,157,0,"*"],[313,164,0,156,0,"CLIP"],[314,164,0,129,0,"CLIP"],[315,165,0,128,2,"VAE"],[316,165,0,141,1,"VAE"],[319,163,0,101,0,"IMAGE"],[321,17,0,172,0,"INT"],[322,18,0,172,1,"INT"],[323,105,0,29,3,"MASK"],[329,101,0,121,0,"IMAGE"],[330,101,0,64,0,"IMAGE"],[333,101,0,173,0,"IMAGE"],[335,105,0,173,2,"MASK"],[336,173,0,56,0,"IMAGE"],[337,173,0,29,1,"IMAGE"],[338,173,0,118,0,"IMAGE"],[339,144,0,174,0,"IMAGE"],[340,174,0,145,0,"IMAGE"],[342,105,0,121,2,"MASK"],[344,1,0,39,0,"IMAGE"],[345,43,0,45,0,"IMAGE"],[346,163,0,175,0,"IMAGE"],[347,175,0,176,0,"IMAGE"],[348,17,0,176,4,"INT"],[349,18,0,176,5,"INT"],[350,176,0,173,1,"IMAGE"]],"groups":[{"id":1,"title":"Reference Image","bounding":[-1547.1763916015625,2954.808349609375,2276.55810546875,758.5380859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Input Video","bounding":[-1542.8428955078125,2131.5859375,1962.621337890625,808.6436157226562],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Model Loaders","bounding":[-1087.3016357421875,881.362060546875,1997.98291015625,1157.26953125],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Comparison","bounding":[2481.928955078125,1830.8016357421875,1877.767333984375,1713.3316650390625],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"SAM2 Masking","bounding":[-1436.0552978515625,3794.581298828125,1905.43115234375,1489.2430419921875],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"2. Inpaint First Frame","bounding":[-5614.90576171875,816.5769653320312,3987.26953125,1283.2587890625],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"1. Get First Frame","bounding":[-6783.642578125,874.828125,1074.17578125,689.0995483398438],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Speedups (Bypass if not working)","bounding":[-4982.171875,904.3734741210938,420,570.6410522460938],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Video Loader","bounding":[-7687.75830078125,725.2305908203125,789.5374145507812,853.25244140625],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":5.559917313492239,"offset":[-4080.864161357375,-2401.308348622628]},"ue_links":[],"VHS_latentpreview":true,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}