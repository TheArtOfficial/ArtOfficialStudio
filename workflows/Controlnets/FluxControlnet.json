{"id":"aec3b3b8-72b0-4e96-8167-cc5eda1f0045","revision":0,"last_node_id":27,"last_link_id":44,"nodes":[{"id":2,"type":"Note","pos":[1635.3094482421875,2458.265380859375],"size":[351.20001220703125,106.19999694824219],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You can use any pre-processor you'd like, I'm using Depth here. DWPose, Canny, Lineart, all work as expected."],"color":"#432","bgcolor":"#653"},{"id":3,"type":"ModelSamplingFlux","pos":[2929.313720703125,1968.0662841796875],"size":[315,170],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":2},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":39},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":41}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[11]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.2,0.5,1024,1024]},{"id":4,"type":"SaveImage","pos":[3946.06689453125,2246.845947265625],"size":[315,270],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":5},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":6,"type":"CLIPTextEncode","pos":[2103.744384765625,2416.234619140625],"size":[371.5728454589844,88],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":6},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[27]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":11,"type":"CLIPTextEncode","pos":[2094.597412109375,2171.38818359375],"size":[400,200],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":9},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[26]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":15,"type":"KSampler","pos":[3308.13818359375,2060.414306640625],"size":[315,787.3333129882812],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":11},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":12},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":13},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":14},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[17]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"KSampler"},"widgets_values":[233307814842938,"fixed",20,1,"euler","normal",1]},{"id":17,"type":"LineArtPreprocessor","pos":[1697.4803466796875,2745.52685546875],"size":[315,82],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":35},{"localized_name":"coarse","name":"coarse","shape":7,"type":"COMBO","widget":{"name":"coarse"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":18,"type":"VAEDecode","pos":[3710.822021484375,2263.335205078125],"size":[210,46],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":17},{"localized_name":"vae","name":"vae","type":"VAE","link":18}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[5]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":25,"type":"ControlNetLoader","pos":[2113.625244140625,1947.45751953125],"size":[315,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[25]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ControlNetLoader"},"widgets_values":["flux_union_pro_2.0.safetensors"]},{"id":23,"type":"SetUnionControlNetType","pos":[2114.795166015625,2038.378662109375],"size":[315,58],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":25},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[28]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"SetUnionControlNetType"},"widgets_values":["depth"]},{"id":27,"type":"ImageResizeKJv2","pos":[2151.384521484375,2670.408935546875],"size":[315,242],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":44},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":37},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":38},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[43]},{"localized_name":"width","name":"width","type":"INT","links":[39,40]},{"localized_name":"height","name":"height","type":"INT","links":[41,42]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"c3dc82108a2a86c17094107ead61d63f8c76200e","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[512,512,"nearest-exact","stretch","0, 0, 0","center",2]},{"id":13,"type":"GetNode","pos":[1254.6622314453125,2846.9921875],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[37]}],"title":"Get_width","properties":{},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":14,"type":"GetNode","pos":[1258.9993896484375,2954.590087890625],"size":[210,58],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[38]}],"title":"Get_height","properties":{},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":26,"type":"LoadImage","pos":[1154.07177734375,2471.87548828125],"size":[342.5999755859375,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[34,35,36]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImage"},"widgets_values":["2025-03-04_00011_.png","image"]},{"id":19,"type":"TorchCompileModelFluxAdvanced","pos":[1634.3389892578125,1913.2291259765625],"size":[400,262],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":19},{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"double_blocks","name":"double_blocks","type":"STRING","widget":{"name":"double_blocks"},"link":null},{"localized_name":"single_blocks","name":"single_blocks","type":"STRING","widget":{"name":"single_blocks"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","shape":7,"type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[1]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"TorchCompileModelFluxAdvanced"},"widgets_values":["inductor",false,"default","0-18","0-37",false,64]},{"id":7,"type":"UNETLoader","pos":[1263.4859619140625,1912.7861328125],"size":[315,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"UNETLoader"},"widgets_values":["flux1-dev.safetensors","fp8_e4m3fn"]},{"id":10,"type":"DualCLIPLoader","pos":[1262.8980712890625,2034.7281494140625],"size":[315,130],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[6,9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn_scaled.safetensors","flux","default"]},{"id":1,"type":"PathchSageAttentionKJ","pos":[2516.17626953125,1949.42578125],"size":[315,58],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1},{"localized_name":"sage_attention","name":"sage_attention","type":"COMBO","widget":{"name":"sage_attention"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","Node name for S&R":"PathchSageAttentionKJ"},"widgets_values":["sageattn_qk_int8_pv_fp16_cuda"]},{"id":24,"type":"ControlNetApplyAdvanced","pos":[2766.195556640625,2309.894775390625],"size":[315,186],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":26},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":27},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":28},{"localized_name":"image","name":"image","type":"IMAGE","link":43},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":30},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[12]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[13]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.6000000000000001,0,0.6000000000000001]},{"id":8,"type":"EmptyLatentImage","pos":[2759.248779296875,2581.56396484375],"size":[315,126],"flags":{"collapsed":false},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":40},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":42},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[14]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"EmptyLatentImage"},"widgets_values":[904,1280,1]},{"id":16,"type":"DWPreprocessor","pos":[1692.5997314453125,2905.19287109375],"size":[320.79998779296875,222],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":34},{"localized_name":"detect_hand","name":"detect_hand","shape":7,"type":"COMBO","widget":{"name":"detect_hand"},"link":null},{"localized_name":"detect_body","name":"detect_body","shape":7,"type":"COMBO","widget":{"name":"detect_body"},"link":null},{"localized_name":"detect_face","name":"detect_face","shape":7,"type":"COMBO","widget":{"name":"detect_face"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"},"link":null},{"localized_name":"pose_estimator","name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"},"link":null},{"localized_name":"scale_stick_for_xinsr_cn","name":"scale_stick_for_xinsr_cn","shape":7,"type":"COMBO","widget":{"name":"scale_stick_for_xinsr_cn"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"POSE_KEYPOINT","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":21,"type":"DepthAnythingV2Preprocessor","pos":[1689.1947021484375,2614.68115234375],"size":[352.79998779296875,82],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":36},{"localized_name":"ckpt_name","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[44]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"DepthAnythingV2Preprocessor"},"widgets_values":["depth_anything_v2_vitl.pth",512]},{"id":9,"type":"VAELoader","pos":[2124.73291015625,2545.75244140625],"size":[315,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[18,30]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"VAELoader"},"widgets_values":["flux_vae.safetensors"]}],"links":[[1,19,0,1,0,"MODEL"],[2,1,0,3,0,"MODEL"],[5,18,0,4,0,"IMAGE"],[6,10,0,6,0,"CLIP"],[9,10,0,11,0,"CLIP"],[11,3,0,15,0,"MODEL"],[12,24,0,15,1,"CONDITIONING"],[13,24,1,15,2,"CONDITIONING"],[14,8,0,15,3,"LATENT"],[17,15,0,18,0,"LATENT"],[18,9,0,18,1,"VAE"],[19,7,0,19,0,"MODEL"],[25,25,0,23,0,"CONTROL_NET"],[26,11,0,24,0,"CONDITIONING"],[27,6,0,24,1,"CONDITIONING"],[28,23,0,24,2,"CONTROL_NET"],[30,9,0,24,4,"VAE"],[34,26,0,16,0,"IMAGE"],[35,26,0,17,0,"IMAGE"],[36,26,0,21,0,"IMAGE"],[37,13,0,27,1,"INT"],[38,14,0,27,2,"INT"],[39,27,1,3,3,"INT"],[40,27,1,8,0,"INT"],[41,27,2,3,4,"INT"],[42,27,2,8,1,"INT"],[43,27,0,24,3,"IMAGE"],[44,21,0,27,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.620921323059156,"offset":[-239.56781849614015,-1664.438362027286]},"frontendVersion":"1.17.11","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}