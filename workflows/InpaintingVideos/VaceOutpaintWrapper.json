{"id":"9ba130d5-b809-492f-bbaa-c0f41e3eb43c","revision":0,"last_node_id":236,"last_link_id":497,"nodes":[{"id":66,"type":"Note","pos":[-1019.0228271484375,1179.111572265625],"size":[512,194],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["https://huggingface.co/Kijai/WanVideo_comfy/tree/main\nDownload the Wan2_1_VACE_1_3B_preview_bf16.safetensors file and put it into ComfyUI>models>diffusion_models, then select it in the \"WanVideo VACE Model Select\"\n\nThe rest of the models are the same as base Wan2.1. If you do not already have Wan2.1 Setup, GO TO THIS LINK AND WATCH THE VIDEO:\nhttps://youtu.be/D4VLXF4ZNq0?si=2c3ekxuDbKbc5m-K"],"color":"#432","bgcolor":"#653"},{"id":37,"type":"WanVideoEnhanceAVideo","pos":[1377.9427490234375,3003.3984375],"size":[315,106],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"feta_args","name":"feta_args","type":"FETAARGS","links":[56]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"4cebb550326361286ed0a5430cc668241d65b832","Node name for S&R":"WanVideoEnhanceAVideo"},"widgets_values":[3.0000000000000004,0,1]},{"id":213,"type":"WanVideoTextEmbedBridge","pos":[-246.77120971679688,1825.260009765625],"size":[315,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":438},{"localized_name":"negative","name":"negative","shape":7,"type":"CONDITIONING","link":439}],"outputs":[{"localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":[436]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"fc7ab666a2087b0ba41a0692f813b332665ffd43","Node name for S&R":"WanVideoTextEmbedBridge"},"widgets_values":[]},{"id":215,"type":"CLIPTextEncode","pos":[-682.7025756835938,1856.8040771484375],"size":[405.3240051269531,88],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":441},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[439]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":["people, person, man, woman, human, moving, walking, overexposure, static, blurred details, subtitles, paintings, pictures, still, overall gray, worst quality, low quality, JPEG compression residue, cluttered background,"]},{"id":221,"type":"VHS_LoadVideo","pos":[-1539.150390625,2192.721435546875],"size":[252.056640625,455.031982421875],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[456]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"3044077-uhd_3840_2160_24fps.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"3044077-uhd_3840_2160_24fps.mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1}}}},{"id":29,"type":"WanVideoVACEEncode","pos":[1003.6529541015625,2447.123779296875],"size":[315,310],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":36},{"localized_name":"input_frames","name":"input_frames","shape":7,"type":"IMAGE","link":455},{"localized_name":"ref_images","name":"ref_images","shape":7,"type":"IMAGE","link":null},{"localized_name":"input_masks","name":"input_masks","shape":7,"type":"MASK","link":494},{"localized_name":"prev_vace_embeds","name":"prev_vace_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":489},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":490},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":491},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"vace_start_percent","name":"vace_start_percent","type":"FLOAT","widget":{"name":"vace_start_percent"},"link":null},{"localized_name":"vace_end_percent","name":"vace_end_percent","type":"FLOAT","widget":{"name":"vace_end_percent"},"link":null},{"localized_name":"tiled_vae","name":"tiled_vae","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_vae"},"link":null}],"outputs":[{"localized_name":"vace_embeds","name":"vace_embeds","type":"WANVIDIMAGE_EMBEDS","links":[35]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"4cebb550326361286ed0a5430cc668241d65b832","Node name for S&R":"WanVideoVACEEncode"},"widgets_values":[832,480,81,1.0000000000000002,0,1,false]},{"id":216,"type":"CLIPLoader","pos":[-1186.3525390625,1807.8231201171875],"size":[315,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[440,441]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPLoader"},"widgets_values":["native_umt5_xxl_fp8_e4m3fn_scaled.safetensors","wan","default"]},{"id":12,"type":"WanVideoTorchCompileSettings","pos":[-464.76324462890625,961.427978515625],"size":[421.6000061035156,202],"flags":{"collapsed":false},"order":4,"mode":0,"inputs":[{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null},{"localized_name":"compile_transformer_blocks_only","name":"compile_transformer_blocks_only","type":"BOOLEAN","widget":{"name":"compile_transformer_blocks_only"},"link":null},{"localized_name":"dynamo_recompile_limit","name":"dynamo_recompile_limit","shape":7,"type":"INT","widget":{"name":"dynamo_recompile_limit"},"link":null}],"outputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","type":"WANCOMPILEARGS","links":[11]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoTorchCompileSettings"},"widgets_values":["inductor",false,"default",false,64,true,128]},{"id":56,"type":"VHS_VideoCombine","pos":[-204.08253479003906,2498.09326171875],"size":[220.3603515625,461.20361328125],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":453},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00475.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00475.png","fullpath":"/workspace/ComfyUI/output/AnimateDiff_00475.mp4"}}}},{"id":65,"type":"WanVideoVACEModelSelect","pos":[-475.1437683105469,1582.5504150390625],"size":[407.0199279785156,62.221839904785156],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"vace_model","name":"vace_model","type":"COMBO","widget":{"name":"vace_model"},"link":null}],"outputs":[{"localized_name":"vace_model","name":"vace_model","type":"VACEPATH","links":[98]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"78559ef1f4462e57fec77dd6a0c2315da08f6f1f","Node name for S&R":"WanVideoVACEModelSelect"},"widgets_values":["Wan2_1-VACE_module_14B_fp8_e4m3fn.safetensors"]},{"id":4,"type":"WanVideoModelLoader","pos":[11.538586616516113,1258.537109375],"size":[401.1031188964844,254],"flags":{},"order":13,"mode":0,"inputs":[{"label":"compile_args","localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":11},{"label":"block_swap_args","localized_name":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":4},{"localized_name":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":458},{"localized_name":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"localized_name":"vace_model","name":"vace_model","shape":7,"type":"VACEPATH","link":98},{"localized_name":"fantasytalking_model","name":"fantasytalking_model","shape":7,"type":"FANTASYTALKINGMODEL","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"base_precision","name":"base_precision","type":"COMBO","widget":{"name":"base_precision"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"load_device","name":"load_device","type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"},"link":null}],"outputs":[{"label":"model","localized_name":"model","name":"model","type":"WANVIDEOMODEL","links":[3]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoModelLoader"},"widgets_values":["wan2.1_t2v_14B_fp8_e4m3fn.safetensors","fp16","disabled","offload_device","sageattn"]},{"id":214,"type":"CLIPTextEncode","pos":[-691.2210083007812,1721.574462890625],"size":[405.3240051269531,88],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":440},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[438]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":["A woman dancing"]},{"id":26,"type":"WanVideoVAELoader","pos":[78.40660858154297,1916.41357421875],"size":[315,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","shape":7,"type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","links":[29,30,32,36]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b415fe78f152e3361b6e37e47074c1a0dc386a8e","Node name for S&R":"WanVideoVAELoader"},"widgets_values":["Wan2_1_VAE_fp32.safetensors","fp32"]},{"id":5,"type":"WanVideoBlockSwap","pos":[-446.7763366699219,1218.222412109375],"size":[315,154],"flags":{"collapsed":false},"order":7,"mode":0,"inputs":[{"localized_name":"blocks_to_swap","name":"blocks_to_swap","type":"INT","widget":{"name":"blocks_to_swap"},"link":null},{"localized_name":"offload_img_emb","name":"offload_img_emb","type":"BOOLEAN","widget":{"name":"offload_img_emb"},"link":null},{"localized_name":"offload_txt_emb","name":"offload_txt_emb","type":"BOOLEAN","widget":{"name":"offload_txt_emb"},"link":null},{"localized_name":"use_non_blocking","name":"use_non_blocking","shape":7,"type":"BOOLEAN","widget":{"name":"use_non_blocking"},"link":null},{"localized_name":"vace_blocks_to_swap","name":"vace_blocks_to_swap","shape":7,"type":"INT","widget":{"name":"vace_blocks_to_swap"},"link":null}],"outputs":[{"label":"block_swap_args","localized_name":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","links":[4]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[20,false,false,false,0]},{"id":234,"type":"Note","pos":[-931.4035034179688,2539.39306640625],"size":[373.8283996582031,311.8792419433594],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Adjust Left, Right, Top, Bottom to pad differrent sections of the video to be outpainted.\n\nUnderstand that only certain resolutions can be generated. It is best to stick to either 832x480, 960x544, or 1280x720\n\nIt's best to adjust the resize image node first, it will auto crop the image, and then pad the image with \"ImagePad KJ\"\n\nFor example if I want to generate a 1280 x 720 video where I pad the left and right for outpainting:\n\nReize Image v2:\nwidth: 1000\nheight: 720\n\nImage Pad KJ:\namount to pad = 1280 - 1000 = 280\nleft & right padding = 280/2 = 140\nleft: 140\nright: 140"],"color":"#432","bgcolor":"#653"},{"id":227,"type":"GetImageSizeAndCount","pos":[-271.1750793457031,2336.267822265625],"size":[190.86483764648438,86],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":476}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"label":"1280 width","localized_name":"width","name":"width","type":"INT","links":[489,492]},{"label":"720 height","localized_name":"height","name":"height","type":"INT","links":[490,493]},{"label":"81 count","localized_name":"count","name":"count","type":"INT","links":[491]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":223,"type":"WanVideoLoraSelect","pos":[-446.126953125,1412.2967529296875],"size":[261.56695556640625,126],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"prev_lora","name":"prev_lora","shape":7,"type":"WANVIDLORA","link":null},{"localized_name":"blocks","name":"blocks","shape":7,"type":"SELECTEDBLOCKS","link":null},{"localized_name":"lora","name":"lora","type":"COMBO","widget":{"name":"lora"},"link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"low_mem_load","name":"low_mem_load","shape":7,"type":"BOOLEAN","widget":{"name":"low_mem_load"},"link":null}],"outputs":[{"localized_name":"lora","name":"lora","type":"WANVIDLORA","links":[458]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d547482ad67c9ecbe740de0e19a5eefd0fbe21e8","Node name for S&R":"WanVideoLoraSelect"},"widgets_values":["Wan21_CausVid_14B_T2V_lora_rank32.safetensors",0.7500000000000001,true]},{"id":2,"type":"WanVideoSampler","pos":[1381.1611328125,2147.637451171875],"size":[315,777.9375],"flags":{},"order":20,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"WANVIDEOMODEL","link":3},{"label":"image_embeds","localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":35},{"label":"text_embeds","localized_name":"text_embeds","name":"text_embeds","shape":7,"type":"WANVIDEOTEXTEMBEDS","link":436},{"localized_name":"samples","name":"samples","shape":7,"type":"LATENT","link":null},{"localized_name":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS","link":56},{"localized_name":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"localized_name":"cache_args","name":"cache_args","shape":7,"type":"CACHEARGS","link":null},{"localized_name":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"localized_name":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS","link":null},{"localized_name":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"localized_name":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":null},{"localized_name":"sigmas","name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"localized_name":"unianimate_poses","name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"localized_name":"fantasytalking_embeds","name":"fantasytalking_embeds","shape":7,"type":"FANTASYTALKING_EMBEDS","link":null},{"localized_name":"uni3c_embeds","name":"uni3c_embeds","shape":7,"type":"UNI3C_EMBEDS","link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"riflex_freq_index","name":"riflex_freq_index","type":"INT","widget":{"name":"riflex_freq_index"},"link":null},{"localized_name":"denoise_strength","name":"denoise_strength","shape":7,"type":"FLOAT","widget":{"name":"denoise_strength"},"link":null},{"localized_name":"batched_cfg","name":"batched_cfg","shape":7,"type":"BOOLEAN","widget":{"name":"batched_cfg"},"link":null},{"localized_name":"rope_function","name":"rope_function","shape":7,"type":"COMBO","widget":{"name":"rope_function"},"link":null},{"localized_name":"teacache_args","name":"teacache_args","shape":7,"type":"TEACACHEARGS","link":null}],"outputs":[{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","slot_index":0,"links":[1]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoSampler"},"widgets_values":[4,1.0000000000000002,5.000000000000001,1026215791871725,"fixed",true,"unipc",0,1,false,"comfy",""]},{"id":235,"type":"VHS_VideoCombine","pos":[2216.2509765625,2697.7568359375],"size":[219.3603515625,460.20281982421875],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":495},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00478.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00478.png","fullpath":"/workspace/ComfyUI/output/AnimateDiff_00478.mp4"}}}},{"id":222,"type":"ImageResizeKJv2","pos":[-1112.9451904296875,2218.360595703125],"size":[270,266],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":456},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[457]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[1000,720,"lanczos","crop","0, 0, 0","center",2,"cpu"]},{"id":220,"type":"ImagePadKJ","pos":[-667.7791748046875,2169.402099609375],"size":[270,262],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":457},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"target_width","name":"target_width","shape":7,"type":"INT","link":null},{"localized_name":"target_height","name":"target_height","shape":7,"type":"INT","link":null},{"localized_name":"left","name":"left","type":"INT","widget":{"name":"left"},"link":null},{"localized_name":"right","name":"right","type":"INT","widget":{"name":"right"},"link":null},{"localized_name":"top","name":"top","type":"INT","widget":{"name":"top"},"link":null},{"localized_name":"bottom","name":"bottom","type":"INT","widget":{"name":"bottom"},"link":null},{"localized_name":"extra_padding","name":"extra_padding","type":"INT","widget":{"name":"extra_padding"},"link":null},{"localized_name":"pad_mode","name":"pad_mode","type":"COMBO","widget":{"name":"pad_mode"},"link":null},{"localized_name":"color","name":"color","type":"STRING","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[453,455,476,496]},{"localized_name":"masks","name":"masks","type":"MASK","links":[486,494]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","Node name for S&R":"ImagePadKJ"},"widgets_values":[140,140,0,0,0,"color","255,255,255"]},{"id":233,"type":"InpaintStitchImproved","pos":[3046.1865234375,2258.517333984375],"size":[214.29940795898438,46],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"stitcher","name":"stitcher","type":"STITCHER","link":487},{"localized_name":"inpainted_image","name":"inpainted_image","type":"IMAGE","link":496}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[480]}],"properties":{"cnr_id":"comfyui-inpaint-cropandstitch","ver":"b432b2411cbb7d3192d35953bd3aafea05a0e245","Node name for S&R":"InpaintStitchImproved"},"widgets_values":[]},{"id":231,"type":"MaskToImage","pos":[3894.53564453125,3181.998046875],"size":[184.62362670898438,26],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":482}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[483]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":232,"type":"PreviewImage","pos":[4175.34033203125,3175.803955078125],"size":[140,246],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":483}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":230,"type":"InpaintCropImproved","pos":[3445.83740234375,2685.40185546875],"size":[348.095703125,626],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":485},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":481},{"localized_name":"optional_context_mask","name":"optional_context_mask","shape":7,"type":"MASK","link":null},{"localized_name":"downscale_algorithm","name":"downscale_algorithm","type":"COMBO","widget":{"name":"downscale_algorithm"},"link":null},{"localized_name":"upscale_algorithm","name":"upscale_algorithm","type":"COMBO","widget":{"name":"upscale_algorithm"},"link":null},{"localized_name":"preresize","name":"preresize","type":"BOOLEAN","widget":{"name":"preresize"},"link":null},{"localized_name":"preresize_mode","name":"preresize_mode","type":"COMBO","widget":{"name":"preresize_mode"},"link":null},{"localized_name":"preresize_min_width","name":"preresize_min_width","type":"INT","widget":{"name":"preresize_min_width"},"link":null},{"localized_name":"preresize_min_height","name":"preresize_min_height","type":"INT","widget":{"name":"preresize_min_height"},"link":null},{"localized_name":"preresize_max_width","name":"preresize_max_width","type":"INT","widget":{"name":"preresize_max_width"},"link":null},{"localized_name":"preresize_max_height","name":"preresize_max_height","type":"INT","widget":{"name":"preresize_max_height"},"link":null},{"localized_name":"mask_fill_holes","name":"mask_fill_holes","type":"BOOLEAN","widget":{"name":"mask_fill_holes"},"link":null},{"localized_name":"mask_expand_pixels","name":"mask_expand_pixels","type":"INT","widget":{"name":"mask_expand_pixels"},"link":null},{"localized_name":"mask_invert","name":"mask_invert","type":"BOOLEAN","widget":{"name":"mask_invert"},"link":null},{"localized_name":"mask_blend_pixels","name":"mask_blend_pixels","type":"INT","widget":{"name":"mask_blend_pixels"},"link":null},{"localized_name":"mask_hipass_filter","name":"mask_hipass_filter","type":"FLOAT","widget":{"name":"mask_hipass_filter"},"link":null},{"localized_name":"extend_for_outpainting","name":"extend_for_outpainting","type":"BOOLEAN","widget":{"name":"extend_for_outpainting"},"link":null},{"localized_name":"extend_up_factor","name":"extend_up_factor","type":"FLOAT","widget":{"name":"extend_up_factor"},"link":null},{"localized_name":"extend_down_factor","name":"extend_down_factor","type":"FLOAT","widget":{"name":"extend_down_factor"},"link":null},{"localized_name":"extend_left_factor","name":"extend_left_factor","type":"FLOAT","widget":{"name":"extend_left_factor"},"link":null},{"localized_name":"extend_right_factor","name":"extend_right_factor","type":"FLOAT","widget":{"name":"extend_right_factor"},"link":null},{"localized_name":"context_from_mask_extend_factor","name":"context_from_mask_extend_factor","type":"FLOAT","widget":{"name":"context_from_mask_extend_factor"},"link":null},{"localized_name":"output_resize_to_target_size","name":"output_resize_to_target_size","type":"BOOLEAN","widget":{"name":"output_resize_to_target_size"},"link":null},{"localized_name":"output_target_width","name":"output_target_width","type":"INT","widget":{"name":"output_target_width"},"link":492},{"localized_name":"output_target_height","name":"output_target_height","type":"INT","widget":{"name":"output_target_height"},"link":493},{"localized_name":"output_padding","name":"output_padding","type":"COMBO","widget":{"name":"output_padding"},"link":null}],"outputs":[{"localized_name":"stitcher","name":"stitcher","type":"STITCHER","links":[487]},{"localized_name":"cropped_image","name":"cropped_image","type":"IMAGE","links":[497]},{"localized_name":"cropped_mask","name":"cropped_mask","type":"MASK","links":[482]}],"properties":{"cnr_id":"comfyui-inpaint-cropandstitch","ver":"b432b2411cbb7d3192d35953bd3aafea05a0e245","Node name for S&R":"InpaintCropImproved"},"widgets_values":["bilinear","bicubic",false,"ensure minimum resolution",1024,1024,16384,16384,true,0,false,0,0.1,false,1,1,1,1,1.0000000000000002,true,512,512,"0"]},{"id":236,"type":"PreviewImage","pos":[4168.0791015625,2920.55859375],"size":[140,246],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":497}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":228,"type":"VHS_VideoCombine","pos":[3927.95263671875,2412.76220703125],"size":[219.3603515625,460.20281982421875],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":480},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00482.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00482.png","fullpath":"/workspace/ComfyUI/output/AnimateDiff_00482.mp4"}}}},{"id":229,"type":"GrowMaskWithBlur","pos":[2893.915283203125,2695.90234375],"size":[292.748046875,246],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":486},{"localized_name":"expand","name":"expand","type":"INT","widget":{"name":"expand"},"link":null},{"localized_name":"incremental_expandrate","name":"incremental_expandrate","type":"FLOAT","widget":{"name":"incremental_expandrate"},"link":null},{"localized_name":"tapered_corners","name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"},"link":null},{"localized_name":"flip_input","name":"flip_input","type":"BOOLEAN","widget":{"name":"flip_input"},"link":null},{"localized_name":"blur_radius","name":"blur_radius","type":"FLOAT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"lerp_alpha","name":"lerp_alpha","type":"FLOAT","widget":{"name":"lerp_alpha"},"link":null},{"localized_name":"decay_factor","name":"decay_factor","type":"FLOAT","widget":{"name":"decay_factor"},"link":null},{"localized_name":"fill_holes","name":"fill_holes","shape":7,"type":"BOOLEAN","widget":{"name":"fill_holes"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[]},{"localized_name":"mask_inverted","name":"mask_inverted","type":"MASK","links":[481]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[20,0,true,false,5,1,1,false]},{"id":1,"type":"WanVideoDecode","pos":[1859.89501953125,2096.162353515625],"size":[315,174],"flags":{},"order":21,"mode":0,"inputs":[{"label":"vae","localized_name":"vae","name":"vae","type":"WANVAE","link":29},{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","link":1},{"localized_name":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"},"link":null},{"localized_name":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"},"link":null},{"localized_name":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"},"link":null},{"localized_name":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"},"link":null},{"localized_name":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"},"link":null}],"outputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","slot_index":0,"links":[253,485,495]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"209c65ba41993c7a9425697f217990df9d13d6d2","Node name for S&R":"WanVideoDecode"},"widgets_values":[false,272,272,144,128]}],"links":[[1,2,0,1,1,"LATENT"],[3,4,0,2,0,"WANVIDEOMODEL"],[4,5,0,4,1,"BLOCKSWAPARGS"],[11,12,0,4,0,"WANCOMPILEARGS"],[29,26,0,1,0,"WANVAE"],[35,29,0,2,1,"WANVIDIMAGE_EMBEDS"],[36,26,0,29,0,"WANVAE"],[56,37,0,2,4,"FETAARGS"],[98,65,0,4,4,"VACEPATH"],[436,213,0,2,2,"WANVIDEOTEXTEMBEDS"],[438,214,0,213,0,"CONDITIONING"],[439,215,0,213,1,"CONDITIONING"],[440,216,0,214,0,"CLIP"],[441,216,0,215,0,"CLIP"],[453,220,0,56,0,"IMAGE"],[455,220,0,29,1,"IMAGE"],[456,221,0,222,0,"IMAGE"],[457,222,0,220,0,"IMAGE"],[458,223,0,4,2,"WANVIDLORA"],[476,220,0,227,0,"IMAGE"],[480,233,0,228,0,"IMAGE"],[481,229,1,230,1,"MASK"],[482,230,2,231,0,"MASK"],[483,231,0,232,0,"IMAGE"],[485,1,0,230,0,"IMAGE"],[486,220,1,229,0,"MASK"],[487,230,0,233,0,"STITCHER"],[489,227,1,29,5,"INT"],[490,227,2,29,6,"INT"],[491,227,3,29,7,"INT"],[492,227,1,230,23,"INT"],[493,227,2,230,24,"INT"],[494,220,1,29,3,"MASK"],[495,1,0,235,0,"IMAGE"],[496,220,0,233,1,"IMAGE"],[497,230,1,236,0,"IMAGE"]],"groups":[{"id":2,"title":"Input Video","bounding":[-1546.381591796875,2092.495849609375,1962.621337890625,808.6436157226562],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Model Loaders","bounding":[-1564.550537109375,889.1433715820312,1997.98291015625,1157.26953125],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Crop n Stitch","bounding":[2671.94384765625,2099.06640625,1877.767333984375,1713.3316650390625],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Sampler","bounding":[804.411376953125,2074.037353515625,1778.9913330078125,1455.544921875],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.31384283767210036,"offset":[1606.2786750560647,-1564.9771473968467]},"frontendVersion":"1.17.11","ue_links":[],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}